# ğŸ¨ Flux1-Dev æ¨¡å‹ä»‹ç»

<div align="center">

![Flux1-Dev](https://img.shields.io/badge/Flux1--Dev-Advanced%20AI%20Model-blue?style=for-the-badge&logo=artificial-intelligence)
![Open Source](https://img.shields.io/badge/Open%20Source-Commercial%20Use-green?style=for-the-badge&logo=open-source-initiative)
![Quality](https://img.shields.io/badge/Quality-Commercial%20Grade-gold?style=for-the-badge&logo=quality)

</div>

Flux1-Dev æ˜¯ç”± Black Forest Labs å¼€å‘çš„å…ˆè¿›æ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆæ¨¡å‹ï¼Œä»£è¡¨äº†å½“å‰å¼€æºå›¾åƒç”ŸæˆæŠ€æœ¯çš„æœ€é«˜æ ‡å‡†ã€‚è¯¥æ¨¡å‹åŸºäº Flow Matching æŠ€æœ¯ï¼Œåœ¨å›¾åƒè´¨é‡ã€æ–‡æœ¬ç†è§£èƒ½åŠ›å’Œç”Ÿæˆé€Ÿåº¦æ–¹é¢éƒ½æœ‰æ˜¾è‘—æå‡ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

<table>
<tr>
<td width="50%">

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„
- **å…ˆè¿›æ¶æ„**: åŸºäºæµåŒ¹é…æŠ€æœ¯çš„æ‰©æ•£å˜æ¢å™¨æ¶æ„
- **å“è¶Šè´¨é‡**: ç”Ÿæˆå›¾åƒè´¨é‡æ¥è¿‘å•†ä¸šçº§æ¨¡å‹æ ‡å‡†
- **å¼ºå¤§ç†è§£**: é›†æˆå®Œæ•´ FP16 ç‰ˆæœ¬ CLIP-L å’Œ T5 æ–‡æœ¬ç¼–ç å™¨

</td>
<td width="50%">

### ğŸš€ æ€§èƒ½ä¼˜åŠ¿
- **é«˜åˆ†è¾¨ç‡æ”¯æŒ**: åŸç”Ÿæ”¯æŒ 1024Ã—1024 åŠæ›´é«˜åˆ†è¾¨ç‡
- **å¿«é€Ÿç”Ÿæˆ**: ä¼˜åŒ–æ¨ç†é€Ÿåº¦ï¼Œæ”¯æŒå°‘æ­¥ç”Ÿæˆ
- **å¼€æºå‹å¥½**: å®Œå…¨å¼€æºï¼Œæ”¯æŒå•†ä¸šä½¿ç”¨
- **é£æ ¼å¤šæ ·**: æ”¯æŒå†™å®ã€è‰ºæœ¯ã€æ¦‚å¿µè®¾è®¡ç­‰å¤šç§é£æ ¼

</td>
</tr>
</table>

---

## ğŸ“Š æŠ€æœ¯è§„æ ¼

| è§„æ ¼é¡¹ç›® | è¯¦ç»†ä¿¡æ¯ |
|---------|---------|
| **æ¨¡å‹ç±»å‹** | æ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆ |
| **æ–‡æœ¬ç¼–ç å™¨** | T5-XXL + CLIP-L |
| **VAE** | ä¸“ç”¨ flux-ae å˜åˆ†è‡ªç¼–ç å™¨ |
| **åŸç”Ÿåˆ†è¾¨ç‡** | 1024Ã—1024 |
| **æ”¯æŒåˆ†è¾¨ç‡** | 512Ã—512 åˆ° 2048Ã—2048 |
| **æ¨èæ­¥æ•°** | 4-50 æ­¥ï¼ˆ8 æ­¥ä¸ºæœ€ä½³å¹³è¡¡ï¼‰ |

---

## ğŸ¯ æ¨¡å‹ä¼˜åŠ¿

<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">

<div style="border: 2px solid #4CAF50; border-radius: 10px; padding: 15px; background: linear-gradient(135deg, #f8fff8 0%, #e8f5e8 100%);">
<h4>ğŸ–¼ï¸ å›¾åƒè´¨é‡</h4>
<p>ç»†èŠ‚ä¸°å¯Œã€è‰²å½©è‡ªç„¶ã€æ„å›¾åˆç†</p>
</div>

<div style="border: 2px solid #2196F3; border-radius: 10px; padding: 15px; background: linear-gradient(135deg, #f8fbff 0%, #e3f2fd 100%);">
<h4>ğŸ“ æ–‡æœ¬è·Ÿéš</h4>
<p>ç²¾ç¡®ç†è§£å¤æ‚æ–‡æœ¬æè¿°</p>
</div>

<div style="border: 2px solid #FF9800; border-radius: 10px; padding: 15px; background: linear-gradient(135deg, #fff8f0 0%, #fff3e0 100%);">
<h4>ğŸ¨ é£æ ¼å¤šæ ·</h4>
<p>ä»ç…§ç‰‡å†™å®åˆ°æŠ½è±¡è‰ºæœ¯</p>
</div>

<div style="border: 2px solid #9C27B0; border-radius: 10px; padding: 15px; background: linear-gradient(135deg, #faf8ff 0%, #f3e5f5 100%);">
<h4>âš¡ é«˜æ•ˆæ€§èƒ½</h4>
<p>ç›¸æ¯”åŒçº§åˆ«æ¨¡å‹æ¨ç†é€Ÿåº¦æ›´å¿«</p>
</div>

</div>

---

## ğŸ”§ é…ç½®è¯´æ˜

### ğŸ“ æ¨¡å‹æ–‡ä»¶æ¸…å•

<details>
<summary><strong>ğŸŒ WebUI ç¯å¢ƒ</strong></summary>

- **ä¸»æ¨¡å‹**: `flux.1_dev_8x8_e4m3fn.safetensors`
- **VAE**: `flux-ae.safetensors`
- **æ–‡æœ¬ç¼–ç å™¨**:
    - `t5xxl_fp16.safetensors`
    - `clip_l.safetensors`
    - `clip_g.safetensors`

</details>

<details>
<summary><strong>ğŸ›ï¸ ComfyUI ç¯å¢ƒ</strong></summary>

- **ä¸»æ¨¡å‹**: `Flux1-dev.safetensors`
- **VAE**: `flux-ae.safetensors`
- **æ–‡æœ¬ç¼–ç å™¨**:
    - `t5xxl_fp16.safetensors`
    - `clip_l.safetensors`

</details>

---

# ğŸ“– ä½¿ç”¨æŒ‡å—

## ğŸ›ï¸ ComfyUI ä½¿ç”¨æ–¹æ³•

### ğŸ–±ï¸ ç•Œé¢æ“ä½œ

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 20px 0;">

#### ğŸ“‹ æ“ä½œæ­¥éª¤

1. **é€‰æ‹©å·¥ä½œæµ**: åœ¨å·¥ä½œæµæ¡†æ¶ä¸­é€‰æ‹©æ­¤å·¥ä½œæµ
   ![å·¥ä½œæµé€‰æ‹©](img_4.png)

2. **è¾“å…¥å†…å®¹**: è¾“å…¥æ‚¨æƒ³è¦ç”Ÿæˆçš„å†…å®¹
   ![å†…å®¹è¾“å…¥](text2img2.png)

3. **åˆ›æ„ç¤ºä¾‹**: æ‚¨å¯ä»¥è¾“å…¥ä¸€äº›æœ‰è¶£çš„å†…å®¹ï¼Œä¾‹å¦‚"å…³ç¾½å¤§æˆ˜ç™½é›ªå…¬ä¸»"

4. **å‚æ•°è®¾ç½®**: è®¾ç½®å›¾åƒåˆ†è¾¨ç‡å’Œå›¾åƒæ•°é‡ã€‚å¦‚æœæƒ³è¦åŠ å¿«ç”Ÿæˆé€Ÿåº¦ï¼Œå¯ä»¥å°† batch_size è®¾ç½®ä¸º 1
   ![å‚æ•°è®¾ç½®](text2img3.png)

5. **ç­‰å¾…ç”Ÿæˆ**: ç­‰å¾…å›¾åƒç”Ÿæˆå®Œæˆ

</div>

### ğŸ”Œ ComfyUI API è°ƒç”¨

**è·å– Token**: ç‚¹å‡»å³ä¸Šè§’æŒ‰é’®ï¼Œæ‰“å¼€åº•éƒ¨é¢æ¿ï¼Œè·å– token
![Tokenè·å–](img_3.png)

**è·å–æœåŠ¡å™¨åœ°å€**: å‚è€ƒä¸‹å›¾è·å– COMFYUI_SERVER
![æœåŠ¡å™¨åœ°å€](img_2.png)

<details style="border: 2px solid #0066cc; border-radius: 8px; padding: 15px; margin: 10px 0; background-color: #f8f9fa;">
<summary style="font-weight: bold; font-size: 18px; color: #0066cc; cursor: pointer;">
ğŸ“‹ ç‚¹å‡»å±•å¼€ API è°ƒç”¨ Python ä»£ç 
</summary>

```python
import requests, json, uuid, time, random, os

COMFYUI_SERVER, COMFYUI_TOKEN = "#åœ¨æ­¤å¡«å…¥æ‚¨çš„æœåŠ¡å™¨åœ°å€", "åœ¨æ­¤å¡«å…¥æ‚¨çš„token"  
UNET_MODEL, VAE_MODEL, CLIP1_MODEL, CLIP2_MODEL = "flux1-dev.safetensors", "ae.safetensors", "t5xxl_fp16.safetensors", "clip_l.safetensors"
PROMPT = "ä¸€ä¸ªç¾ä¸½çš„åŠ¨æ¼«å¥³å­©ï¼Œé•¿å‘é£˜é€¸ï¼Œç©¿ç€ä¼˜é›…çš„è£™å­ï¼Œç«™åœ¨é­”æ³•èŠ±å›­ä¸­ï¼Œå‘å…‰çš„èŠ±æœµï¼ŒæŸ”å’Œçš„å…‰çº¿ï¼Œé«˜è´¨é‡ï¼Œç»†èŠ‚ä¸°å¯Œ"

class FluxClient:
    def __init__(self):
        self.base_url, self.client_id = f"http://{COMFYUI_SERVER}", str(uuid.uuid4())
        self.headers = {"Content-Type": "application/json", **({"Authorization": f"Bearer {COMFYUI_TOKEN}"} if COMFYUI_TOKEN else {})}

    def generate(self, prompt, aspect="1:1 square 1024x1024", steps=35, guidance=3.5, batch=1):
        workflow = {"6": {"inputs": {"text": prompt, "clip": ["11", 0]}, "class_type": "CLIPTextEncode"}, "8": {"inputs": {"samples": ["13", 0], "vae": ["10", 0]}, "class_type": "VAEDecode"}, "9": {"inputs": {"filename_prefix": "Flux", "images": ["8", 0]}, "class_type": "SaveImage"}, "10": {"inputs": {"vae_name": VAE_MODEL}, "class_type": "VAELoader"}, "11": {"inputs": {"clip_name1": CLIP1_MODEL, "clip_name2": CLIP2_MODEL, "type": "flux", "device": "default"}, "class_type": "DualCLIPLoader"}, "12": {"inputs": {"unet_name": UNET_MODEL, "weight_dtype": "fp8_e4m3fn"}, "class_type": "UNETLoader"}, "13": {"inputs": {"noise": ["25", 0], "guider": ["22", 0], "sampler": ["16", 0], "sigmas": ["17", 0], "latent_image": ["85", 4]}, "class_type": "SamplerCustomAdvanced"}, "16": {"inputs": {"sampler_name": "dpmpp_2m"}, "class_type": "KSamplerSelect"}, "17": {"inputs": {"scheduler": "sgm_uniform", "steps": steps, "denoise": 1, "model": ["61", 0]}, "class_type": "BasicScheduler"}, "22": {"inputs": {"model": ["61", 0], "conditioning": ["60", 0]}, "class_type": "BasicGuider"}, "25": {"inputs": {"noise_seed": random.randint(1, 1000000000000000)}, "class_type": "RandomNoise"}, "60": {"inputs": {"guidance": guidance, "conditioning": ["6", 0]}, "class_type": "FluxGuidance"}, "61": {"inputs": {"max_shift": 1.15, "base_shift": 0.5, "width": ["85", 0], "height": ["85", 1], "model": ["12", 0]}, "class_type": "ModelSamplingFlux"}, "85": {"inputs": {"width": 1024, "height": 1024, "aspect_ratio": aspect, "swap_dimensions": "Off", "upscale_factor": 1, "batch_size": batch}, "class_type": "CR SDXL Aspect Ratio"}}
        return requests.post(f"{self.base_url}/prompt", headers=self.headers, json={"prompt": workflow, "client_id": self.client_id}).json()["prompt_id"]

    def status(self, task_id):
        queue = requests.get(f"{self.base_url}/queue", headers=self.headers).json()
        return "processing" if any(item[1] == task_id for item in queue.get("queue_running", [])) else "pending" if any(item[1] == task_id for item in queue.get("queue_pending", [])) else "completed" if task_id in requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers).json() else "processing"

    def download(self, task_id, output_dir="./flux_output/"):
        history = requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers).json()
        files = []
        if task_id in history:
            for output in history[task_id]['outputs'].values():
                if 'images' in output:
                    os.makedirs(output_dir, exist_ok=True)
                    for img in output['images']:
                        path = os.path.join(output_dir, img['filename'])
                        with open(path, "wb") as f: f.write(requests.get(f"{self.base_url}/view?filename={img['filename']}", headers=self.headers).content)
                        files.append(path)
        return files

def main():
    client = FluxClient()
    print(f"ğŸ¨ æ­£åœ¨ç”Ÿæˆ: {PROMPT}")
    task_id = client.generate(PROMPT)
    print(f"ğŸ†” ä»»åŠ¡ID: {task_id}")
    while True:
        status = client.status(task_id)
        print(f"ğŸ“Š çŠ¶æ€: {status}")
        if status == "completed": break
        time.sleep(5)
    files = client.download(task_id)
    print(f"ğŸ‰ å®Œæˆï¼ç”Ÿæˆäº† {len(files)} å¼ å›¾ç‰‡: {files}")

if __name__ == "__main__": main()
```
</details>

---

## ğŸŒ Web UI ä½¿ç”¨æ–¹æ³•

### ğŸ–±ï¸ ç•Œé¢æ“ä½œ

<div style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white; padding: 20px; border-radius: 10px; margin: 20px 0;">

#### ğŸ”§ é…ç½®æ­¥éª¤

1. **æ¨¡å‹åˆ‡æ¢**: åœ¨ Checkpoint æ¨¡å‹é€‰æ‹©å™¨ä¸­é€‰æ‹© Flux1-Dev (HyFY-8-Step-Hybrid-v1.0.safetensors) æ¨¡å‹

2. **VAE å’Œ CLIP æ¨¡å‹é€‰æ‹©**: é€‰æ‹© Clip_l.safetensors, t5xxl_fp16.safetensors, flux-ae.safetensors
   ![æ¨¡å‹é€‰æ‹©](img_1.png)

3. **æç¤ºè¯è¾“å…¥**:
    - **æ­£å‘æç¤ºè¯**: è¯¦ç»†æè¿°æœŸæœ›çš„å›¾åƒ
    - **è´Ÿå‘æç¤ºè¯**: æè¿°ä¸æƒ³è¦çš„å…ƒç´ ï¼ˆFlux æ¨¡å‹å¯¹è´Ÿå‘æç¤ºè¯ä¸æ•æ„Ÿï¼‰

4. **å‚æ•°è®¾ç½®**:
    - **æ­¥æ•°**: æ¨è 8-20 æ­¥
    - **CFG**: æ¨è 1.0-3.5ï¼ˆè¾ƒä½å€¼æ•ˆæœæ›´å¥½ï¼‰
    - **é‡‡æ ·å™¨**: æ¨è Euler æˆ– DPM++ 2M
    - **åˆ†è¾¨ç‡**: 1024Ã—1024 æˆ–å…¶ä»–æ”¯æŒçš„å°ºå¯¸

5. **ç”Ÿæˆå›¾åƒ**: ç‚¹å‡»"ç”Ÿæˆ"æŒ‰é’®å¼€å§‹ç”Ÿæˆ

6. **ç»“æœå¤„ç†**: æŸ¥çœ‹ã€ä¿å­˜æˆ–è¿›ä¸€æ­¥ç¼–è¾‘ç”Ÿæˆçš„å›¾åƒ

</div>

### ğŸ¨ æç¤ºè¯ç¤ºä¾‹

<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">

<div style="border-left: 4px solid #4CAF50; padding: 15px; background: #f8fff8;">
<h4>ğŸ“¸ å†™å®é£æ ¼</h4>
<code>"ä¸€ä½å¹´è½»å¥³æ€§çš„ä¸“ä¸šè‚–åƒï¼Œè‡ªç„¶å…‰çº¿ï¼Œé«˜åˆ†è¾¨ç‡ï¼Œè¯¦ç»†çš„çš®è‚¤çº¹ç†ï¼Œç…§ç‰‡å†™å®"</code>
</div>

<div style="border-left: 4px solid #2196F3; padding: 15px; background: #f8fbff;">
<h4>ğŸ¨ è‰ºæœ¯é£æ ¼</h4>
<code>"æ˜¥å¤©èŠ±å›­çš„å°è±¡æ´¾ç»˜ç”»ï¼ŒæŸ”å’Œçš„ç¬”è§¦ï¼Œé²œè‰³çš„è‰²å½©ï¼Œè‰ºæœ¯æ°ä½œ"</code>
</div>

<div style="border-left: 4px solid #FF9800; padding: 15px; background: #fff8f0;">
<h4>ğŸš€ æ¦‚å¿µè®¾è®¡</h4>
<code>"æœªæ¥æœºå™¨äººè®¾è®¡ï¼Œå…‰æ»‘çš„é‡‘å±è¡¨é¢ï¼Œå‘å…‰çš„è“è‰²è£…é¥°ï¼Œæ¦‚å¿µè‰ºæœ¯ï¼Œé«˜åº¦è¯¦ç»†"</code>
</div>

<div style="border-left: 4px solid #9C27B0; padding: 15px; background: #faf8ff;">
<h4>ğŸ”ï¸ é£æ™¯æ‘„å½±</h4>
<code>"é»„é‡‘æ—¶åˆ»çš„å±±æ™¯ï¼Œæˆå‰§æ€§çš„äº‘å½©ï¼Œä¸“ä¸šæ‘„å½±ï¼Œè¶…å¹¿è§’ï¼ŒHDR"</code>
</div>

</div>

**UI ç•Œé¢ä½¿ç”¨ç¤ºä¾‹**
![UIç•Œé¢](img.png)

<details style="border: 2px solid #ff6b6b; border-radius: 8px; padding: 15px; margin: 10px 0; background-color: #fff5f5;">
<summary style="font-weight: bold; font-size: 18px; color: #ff6b6b; cursor: pointer;">
ğŸ”Œ ç‚¹å‡»å±•å¼€ API è°ƒç”¨ Python ä»£ç 
</summary>

```python
import requests
import base64
import time
import uuid

# é…ç½®
base_url = "http://127.0.0.1:7680"
auth = ("admin", "${APIKEY}")
session_hash = str(uuid.uuid4())[:12]

# è®¾ç½® VAE/æ–‡æœ¬ç¼–ç å™¨
print("è®¾ç½® VAE/æ–‡æœ¬ç¼–ç å™¨...")
requests.post(f"{base_url}/run/predict", json={
    "data": [["flux-ae.safetensors", "t5xxl_fp16.safetensors", "clip_l.safetensors", "clip_g.safetensors"]],
    "event_data": None,
    "fn_index": 9,
    "trigger_id": 1001,
    "session_hash": session_hash
}, auth=auth)
time.sleep(3)

# åˆ‡æ¢ FLUX æ¨¡å‹
print("åˆ‡æ¢ FLUX æ¨¡å‹...")
requests.post(f"{base_url}/queue/join", json={
    "data": ["HyFY-8-Step-Hybrid-v1.0.safetensors"],
    "event_data": None,
    "fn_index": 8,
    "trigger_id": 1002,
    "session_hash": session_hash
}, auth=auth)
time.sleep(15)

# ç”Ÿæˆå›¾åƒ
print("ç”Ÿæˆå›¾åƒ...")
result = requests.post(f"{base_url}/sdapi/v1/txt2img", json={
    "prompt": "ä¸€åªç¾ä¸½çš„çŒ«",
    "steps": 8,
    "width": 1024,
    "height": 1024,
    "cfg_scale": 1.0,
    "sampler_name": "Euler"
}, auth=auth).json()

# ä¿å­˜å›¾åƒ
if "images" in result:
    with open("output.png", "wb") as f:
        f.write(base64.b64decode(result["images"][0]))
    print("å›¾åƒå·²ä¿å­˜ä¸º output.png")
else:
    print("é”™è¯¯:", result)
```
</details>

---

## ğŸ”„ å…¶ä»–å†…ç½®æ¨¡å‹

<div style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); color: white; padding: 20px; border-radius: 10px; margin: 20px 0;">

ç›®å‰åœ¨æœåŠ¡ä¸­ï¼ŒFlux æ¨¡å‹å°†éƒ¨ç½²åˆ° ECS å®ä¾‹ã€‚é™¤äº†å½“å‰çš„ Flux-dev æ¨¡å‹å¤–ï¼Œè¿˜æ”¯æŒ SD1.5 å’Œ SD3 æ¨¡å‹ï¼Œå¯ä»¥åœ¨ Webui Forge ç•Œé¢ä¸­åŠ¨æ€åˆ‡æ¢ã€‚

### æ”¯æŒçš„æ¨¡å‹åˆ—è¡¨
- **Flux1-Dev**: æœ€æ–°çš„é«˜è´¨é‡æ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆæ¨¡å‹
- **SD1.5**: ç»å…¸ç¨³å®šæ‰©æ•£æ¨¡å‹
- **SD3**: æœ€æ–°ç‰ˆæœ¬ç¨³å®šæ‰©æ•£æ¨¡å‹

</div>

---

<div align="center" style="margin-top: 40px;">

### ğŸ‰ å¼€å§‹æ‚¨çš„ AI è‰ºæœ¯åˆ›ä½œä¹‹æ—…ï¼

![åˆ›ä½œ](https://img.shields.io/badge/Ready%20to%20Create-Let's%20Go!-brightgreen?style=for-the-badge&logo=rocket)

</div>