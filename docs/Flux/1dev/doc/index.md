# ğŸ¨ Flux1-Dev æ¨¡å‹ä½¿ç”¨æŒ‡å—

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white; margin-bottom: 20px;">
  <h2 style="margin: 0; font-size: 28px;">âœ¨ æ¨¡å‹ç®€ä»‹</h2>
  <p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">ç”± Black Forest Labs å¼€å‘çš„å…ˆè¿›æ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆæ¨¡å‹</p>
</div>

**Flux1-Dev** æ˜¯å½“å‰å¼€æºå›¾åƒç”ŸæˆæŠ€æœ¯çš„æœ€é«˜æ°´å‡†ä»£è¡¨ï¼ŒåŸºäºæµåŒ¹é…ï¼ˆFlow Matchingï¼‰æŠ€æœ¯ï¼Œåœ¨å›¾åƒè´¨é‡ã€æ–‡æœ¬ç†è§£èƒ½åŠ›å’Œç”Ÿæˆé€Ÿåº¦æ–¹é¢éƒ½æœ‰æ˜¾è‘—æå‡ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 20px 0;">

<div style="background: #f8f9fa; border-left: 4px solid #28a745; padding: 15px; border-radius: 8px;">
  <h4 style="color: #28a745; margin: 0 0 10px 0;">ğŸ—ï¸ å…ˆè¿›æ¶æ„</h4>
  <p style="margin: 0;">åŸºäºæµåŒ¹é…æŠ€æœ¯çš„æ‰©æ•£å˜æ¢å™¨æ¶æ„</p>
</div>

<div style="background: #f8f9fa; border-left: 4px solid #007bff; padding: 15px; border-radius: 8px;">
  <h4 style="color: #007bff; margin: 0 0 10px 0;">ğŸ¯ å“è¶Šè´¨é‡</h4>
  <p style="margin: 0;">ç”Ÿæˆå›¾åƒè´¨é‡æ¥è¿‘å•†ä¸šçº§æ¨¡å‹æ°´å‡†</p>
</div>

<div style="background: #f8f9fa; border-left: 4px solid #6f42c1; padding: 15px; border-radius: 8px;">
  <h4 style="color: #6f42c1; margin: 0 0 10px 0;">ğŸ§  å¼ºå¤§æ–‡æœ¬ç†è§£</h4>
  <p style="margin: 0;">é›†æˆå®Œæ•´FP16ç‰ˆCLIP-Lä¸T5æ–‡æœ¬ç¼–ç å™¨</p>
</div>

<div style="background: #f8f9fa; border-left: 4px solid #fd7e14; padding: 15px; border-radius: 8px;">
  <h4 style="color: #fd7e14; margin: 0 0 10px 0;">ğŸ“ é«˜åˆ†è¾¨ç‡æ”¯æŒ</h4>
  <p style="margin: 0;">åŸç”Ÿæ”¯æŒ1024Ã—1024åŠæ›´é«˜åˆ†è¾¨ç‡</p>
</div>

<div style="background: #f8f9fa; border-left: 4px solid #20c997; padding: 15px; border-radius: 8px;">
  <h4 style="color: #20c997; margin: 0 0 10px 0;">âš¡ å¿«é€Ÿç”Ÿæˆ</h4>
  <p style="margin: 0;">ä¼˜åŒ–çš„æ¨ç†é€Ÿåº¦ï¼Œæ”¯æŒå°‘æ­¥ç”Ÿæˆ</p>
</div>

<div style="background: #f8f9fa; border-left: 4px solid #e83e8c; padding: 15px; border-radius: 8px;">
  <h4 style="color: #e83e8c; margin: 0 0 10px 0;">ğŸ¨ å¤šæ ·åŒ–é£æ ¼</h4>
  <p style="margin: 0;">æ”¯æŒå†™å®ã€è‰ºæœ¯ã€æ¦‚å¿µè®¾è®¡ç­‰å¤šç§é£æ ¼</p>
</div>

</div>

## ğŸ“Š æŠ€æœ¯è§„æ ¼

<div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin: 20px 0;">

| è§„æ ¼é¡¹ç›® | è¯¦ç»†ä¿¡æ¯ |
|---------|---------|
| **æ¨¡å‹ç±»å‹** | æ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆï¼ˆText-to-Imageï¼‰ |
| **æ–‡æœ¬ç¼–ç å™¨** | T5-XXL + CLIP-L |
| **VAE** | ä¸“ç”¨çš„flux-aeå˜åˆ†è‡ªç¼–ç å™¨ |
| **åŸç”Ÿåˆ†è¾¨ç‡** | 1024Ã—1024 |
| **æ”¯æŒåˆ†è¾¨ç‡** | 512Ã—512 åˆ° 2048Ã—2048 |
| **æ¨èæ­¥æ•°** | 4-50æ­¥ï¼ˆ8æ­¥ä¸ºæœ€ä½³å¹³è¡¡ç‚¹ï¼‰ |

</div>

## ğŸ† æ¨¡å‹ä¼˜åŠ¿

<div style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 12px; margin: 20px 0;">

- **ğŸ–¼ï¸ å›¾åƒè´¨é‡**ï¼šç»†èŠ‚ä¸°å¯Œï¼Œè‰²å½©è‡ªç„¶ï¼Œæ„å›¾åˆç†
- **ğŸ“ æ–‡æœ¬éµå¾ª**ï¼šç²¾ç¡®ç†è§£å¤æ‚æ–‡æœ¬æè¿°
- **ğŸ­ é£æ ¼å¤šæ ·**ï¼šä»ç…§ç‰‡çº§å†™å®åˆ°æŠ½è±¡è‰ºæœ¯
- **ğŸ¯ ä¸€è‡´æ€§**ï¼šç”Ÿæˆç»“æœç¨³å®šå¯æ§
- **âš¡ æ•ˆç‡**ï¼šç›¸æ¯”åŒçº§åˆ«æ¨¡å‹æ¨ç†é€Ÿåº¦æ›´å¿«

</div>

---

# âš™ï¸ é…ç½®è¯´æ˜

## ğŸ“ æ¨¡å‹æ–‡ä»¶

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">

<div style="background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 15px;">
  <h4 style="color: #1976d2; margin: 0 0 15px 0;">ğŸŒ WebUI ç¯å¢ƒ</h4>

**ä¸»æ¨¡å‹**
- `flux.1_dev_8x8_e4m3fn.safetensors`

**VAE**
- `flux-ae.safetensors`

**æ–‡æœ¬ç¼–ç å™¨**
- `t5xxl_fp16.safetensors`
- `clip_l.safetensors`
- `clip_g.safetensors`
</div>

<div style="background: #f3e5f5; border: 1px solid #9c27b0; border-radius: 8px; padding: 15px;">
  <h4 style="color: #7b1fa2; margin: 0 0 15px 0;">ğŸ›ï¸ ComfyUI ç¯å¢ƒ</h4>

**ä¸»æ¨¡å‹**
- `Flux1-dev.safetensors`

**VAE**
- `flux-ae.safetensors`

**æ–‡æœ¬ç¼–ç å™¨**
- `t5xxl_fp16.safetensors`
- `clip_l.safetensors`
</div>

</div>

---

# ğŸ“– ä½¿ç”¨æŒ‡å—

## ğŸ›ï¸ ComfyUI ä½¿ç”¨

### ğŸ–±ï¸ ç•Œé¢æ“ä½œ

<div style="background: #fff3cd; border: 1px solid #ffc107; border-radius: 8px; padding: 15px; margin: 15px 0;">

**æ­¥éª¤ 1ï¼šé€‰æ‹©å·¥ä½œæµ**
- åœ¨å·¥ä½œæµæ¡†å¤„é€‰æ‹©è¯¥å·¥ä½œæµ
  ![img.png](text2img.png)

**æ­¥éª¤ 2ï¼šè¾“å…¥æç¤ºè¯**
- è¾“å…¥ä½ æƒ³è¦çš„å†…å®¹æè¿°
  ![img.png](text2img2.png)

**æ­¥éª¤ 3ï¼šåˆ›æ„ç¤ºä¾‹**
- å¯ä»¥è¾“å…¥ä¸€äº›æœ‰è¶£çš„å†…å®¹ï¼Œæ¯”å¦‚"å…³ç¾½å¤§æˆ˜ç™½é›ªå…¬ä¸»"

**æ­¥éª¤ 4ï¼šå‚æ•°è®¾ç½®**
- è®¾ç½®å›¾ç‰‡çš„åˆ†è¾¨ç‡å’Œæ•°é‡
- å¦‚éœ€åŠ å¿«ç”Ÿæˆé€Ÿåº¦ï¼Œå¯å°† batch_size è®¾ç½®ä¸º 1
  ![img.png](text2img3.png)

**æ­¥éª¤ 5ï¼šç­‰å¾…ç”Ÿæˆ**
- è€å¿ƒç­‰å¾…å›¾ç‰‡ç”Ÿæˆå®Œæˆ

</div>

### ğŸ”Œ ComfyUI APIè°ƒç”¨

<div style="background: #d1ecf1; border: 1px solid #17a2b8; border-radius: 8px; padding: 15px; margin: 15px 0;">

**è·å–Token**
- ç‚¹å‡»å³ä¸Šæ–¹æŒ‰é’®ï¼Œæ‰“å¼€åº•éƒ¨é¢æ¿è·å–token
  ![img_1.png](img_3.png)

**è·å–æœåŠ¡å™¨åœ°å€**
- COMFYUI_SERVERçš„è·å–å‚è€ƒ
  ![img_2.png](img_2.png)

</div>

<details style="border: 2px solid #0066cc; border-radius: 8px; padding: 15px; margin: 10px 0; background-color: #f8f9fa;">
  <summary style="font-weight: bold; font-size: 18px; color: #0066cc; cursor: pointer;">
    ğŸ“‹ ç‚¹å‡»å±•å¼€APIè°ƒç”¨Pythonä»£ç 
  </summary>

```python
import requests, json, uuid, time, random, os

COMFYUI_SERVER, COMFYUI_TOKEN = "#åœ¨è¿™é‡Œå¡«å…¥ä½ çš„æœåŠ¡å™¨åœ°å€", "åœ¨è¿™é‡Œå¡«å…¥ä½ çš„token"  
UNET_MODEL, VAE_MODEL, CLIP1_MODEL, CLIP2_MODEL = "flux1-dev.safetensors", "ae.safetensors", "t5xxl_fp16.safetensors", "clip_l.safetensors"
PROMPT = "A beautiful anime girl with long flowing hair, wearing elegant dress, standing in a magical garden with glowing flowers, soft lighting, high quality, detailed"

class FluxClient:
    def __init__(self):
        self.base_url, self.client_id = f"http://{COMFYUI_SERVER}", str(uuid.uuid4())
        self.headers = {"Content-Type": "application/json", **({"Authorization": f"Bearer {COMFYUI_TOKEN}"} if COMFYUI_TOKEN else {})}

    def generate(self, prompt, aspect="1:1 square 1024x1024", steps=35, guidance=3.5, batch=1):
        workflow = {"6": {"inputs": {"text": prompt, "clip": ["11", 0]}, "class_type": "CLIPTextEncode"}, "8": {"inputs": {"samples": ["13", 0], "vae": ["10", 0]}, "class_type": "VAEDecode"}, "9": {"inputs": {"filename_prefix": "Flux", "images": ["8", 0]}, "class_type": "SaveImage"}, "10": {"inputs": {"vae_name": VAE_MODEL}, "class_type": "VAELoader"}, "11": {"inputs": {"clip_name1": CLIP1_MODEL, "clip_name2": CLIP2_MODEL, "type": "flux", "device": "default"}, "class_type": "DualCLIPLoader"}, "12": {"inputs": {"unet_name": UNET_MODEL, "weight_dtype": "fp8_e4m3fn"}, "class_type": "UNETLoader"}, "13": {"inputs": {"noise": ["25", 0], "guider": ["22", 0], "sampler": ["16", 0], "sigmas": ["17", 0], "latent_image": ["85", 4]}, "class_type": "SamplerCustomAdvanced"}, "16": {"inputs": {"sampler_name": "dpmpp_2m"}, "class_type": "KSamplerSelect"}, "17": {"inputs": {"scheduler": "sgm_uniform", "steps": steps, "denoise": 1, "model": ["61", 0]}, "class_type": "BasicScheduler"}, "22": {"inputs": {"model": ["61", 0], "conditioning": ["60", 0]}, "class_type": "BasicGuider"}, "25": {"inputs": {"noise_seed": random.randint(1, 1000000000000000)}, "class_type": "RandomNoise"}, "60": {"inputs": {"guidance": guidance, "conditioning": ["6", 0]}, "class_type": "FluxGuidance"}, "61": {"inputs": {"max_shift": 1.15, "base_shift": 0.5, "width": ["85", 0], "height": ["85", 1], "model": ["12", 0]}, "class_type": "ModelSamplingFlux"}, "85": {"inputs": {"width": 1024, "height": 1024, "aspect_ratio": aspect, "swap_dimensions": "Off", "upscale_factor": 1, "batch_size": batch}, "class_type": "CR SDXL Aspect Ratio"}}
        return requests.post(f"{self.base_url}/prompt", headers=self.headers, json={"prompt": workflow, "client_id": self.client_id}).json()["prompt_id"]

    def status(self, task_id):
        queue = requests.get(f"{self.base_url}/queue", headers=self.headers).json()
        return "processing" if any(item[1] == task_id for item in queue.get("queue_running", [])) else "pending" if any(item[1] == task_id for item in queue.get("queue_pending", [])) else "completed" if task_id in requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers).json() else "processing"

    def download(self, task_id, output_dir="./flux_output/"):
        history = requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers).json()
        files = []
        if task_id in history:
            for output in history[task_id]['outputs'].values():
                if 'images' in output:
                    os.makedirs(output_dir, exist_ok=True)
                    for img in output['images']:
                        path = os.path.join(output_dir, img['filename'])
                        with open(path, "wb") as f: f.write(requests.get(f"{self.base_url}/view?filename={img['filename']}", headers=self.headers).content)
                        files.append(path)
        return files

def main():
    client = FluxClient()
    print(f"ğŸ¨ ç”Ÿæˆ: {PROMPT}")
    task_id = client.generate(PROMPT)
    print(f"ğŸ†” ID: {task_id}")
    while True:
        status = client.status(task_id)
        print(f"ğŸ“Š {status}")
        if status == "completed": break
        time.sleep(5)
    files = client.download(task_id)
    print(f"ğŸ‰ å®Œæˆ! ç”Ÿæˆ {len(files)} å¼ å›¾ç‰‡: {files}")

if __name__ == "__main__": main()
```
</details>

---

## ğŸŒ Web UI ä½¿ç”¨

### ğŸ–±ï¸ ç•Œé¢æ“ä½œ

<div style="background: #d4edda; border: 1px solid #28a745; border-radius: 8px; padding: 20px; margin: 20px 0;">

**1. æ¨¡å‹åˆ‡æ¢**
- åœ¨Checkpointæ¨¡å‹é€‰æ‹©å™¨ä¸­é€‰æ‹©Flux1-Devï¼ˆHyFY-8-Step-Hybrid-v1.0.safetensorsï¼‰æ¨¡å‹

**2. VAEå’ŒCLIPæ¨¡å‹é€‰æ‹©**
- é€‰æ‹©ï¼š`Clip_l.safetensors`, `t5xxl_fp16.safetensors`, `flux-ae.safetensors`
  ![img_1.png](img_1.png)

**3. æç¤ºè¯è¾“å…¥**
- **æ­£å‘æç¤ºè¯**ï¼šè¯¦ç»†æè¿°æƒ³è¦ç”Ÿæˆçš„å›¾åƒ
- **è´Ÿå‘æç¤ºè¯**ï¼šæè¿°ä¸æƒ³è¦çš„å…ƒç´ ï¼ˆFluxæ¨¡å‹å¯¹è´Ÿå‘æç¤ºè¯ä¸æ•æ„Ÿï¼‰

**4. å‚æ•°è®¾ç½®**
- **æ­¥æ•°**ï¼šæ¨è 8-20 æ­¥
- **CFG**ï¼šæ¨è 1.0-3.5ï¼ˆè¾ƒä½å€¼æ•ˆæœæ›´å¥½ï¼‰
- **é‡‡æ ·å™¨**ï¼šæ¨è Euler æˆ– DPM++ 2M
- **åˆ†è¾¨ç‡**ï¼š1024Ã—1024 æˆ–å…¶ä»–æ”¯æŒçš„å°ºå¯¸

**5. ç”Ÿæˆå›¾åƒ**
- ç‚¹å‡»"Generate"æŒ‰é’®å¼€å§‹ç”Ÿæˆ

**6. ç»“æœå¤„ç†**
- æŸ¥çœ‹ã€ä¿å­˜æˆ–è¿›ä¸€æ­¥ç¼–è¾‘ç”Ÿæˆçš„å›¾åƒ

</div>

### ğŸ¨ æç¤ºè¯ç¤ºä¾‹

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">

<div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; border-radius: 8px;">
  <h4 style="color: #856404; margin: 0 0 10px 0;">ğŸ“¸ å†™å®é£æ ¼</h4>
  <code style="background: #f8f9fa; padding: 5px; border-radius: 4px; display: block; font-size: 12px;">
    "a professional portrait of a young woman, natural lighting, high resolution, detailed skin texture, photorealistic"
  </code>
</div>

<div style="background: #f8d7da; border-left: 4px solid #dc3545; padding: 15px; border-radius: 8px;">
  <h4 style="color: #721c24; margin: 0 0 10px 0;">ğŸ¨ è‰ºæœ¯é£æ ¼</h4>
  <code style="background: #f8f9fa; padding: 5px; border-radius: 4px; display: block; font-size: 12px;">
    "an impressionist painting of a garden in spring, soft brushstrokes, vibrant colors, artistic masterpiece"
  </code>
</div>

<div style="background: #d1ecf1; border-left: 4px solid #17a2b8; padding: 15px; border-radius: 8px;">
  <h4 style="color: #0c5460; margin: 0 0 10px 0;">ğŸ¤– æ¦‚å¿µè®¾è®¡</h4>
  <code style="background: #f8f9fa; padding: 5px; border-radius: 4px; display: block; font-size: 12px;">
    "futuristic robot design, sleek metallic surface, glowing blue accents, concept art, highly detailed"
  </code>
</div>

<div style="background: #d4edda; border-left: 4px solid #28a745; padding: 15px; border-radius: 8px;">
  <h4 style="color: #155724; margin: 0 0 10px 0;">ğŸ”ï¸ é£æ™¯æ‘„å½±</h4>
  <code style="background: #f8f9fa; padding: 5px; border-radius: 4px; display: block; font-size: 12px;">
    "mountain landscape at golden hour, dramatic clouds, professional photography, ultra-wide angle, HDR"
  </code>
</div>

</div>

### ğŸ–¼ï¸ UIç•Œé¢ä½¿ç”¨ç¤ºä¾‹

![img.png](img.png)

<details style="border: 2px solid #28a745; border-radius: 8px; padding: 15px; margin: 10px 0; background-color: #f8f9fa;">
  <summary style="font-weight: bold; font-size: 18px; color: #28a745; cursor: pointer;">
    ğŸ ç‚¹å‡»å±•å¼€APIè°ƒç”¨Pythonä»£ç 
  </summary>

```python
import requests
import base64
import time
import uuid

# é…ç½®
base_url = "http://127.0.0.1:7680"
auth = ("admin", "${APIKEY}")
session_hash = str(uuid.uuid4())[:12]

# è®¾ç½®VAE/Text Encoder
print("æ­£åœ¨è®¾ç½®VAE/Text Encoder...")
requests.post(f"{base_url}/run/predict", json={
    "data": [["flux-ae.safetensors", "t5xxl_fp16.safetensors", "clip_l.safetensors", "clip_g.safetensors"]],
    "event_data": None,
    "fn_index": 9,
    "trigger_id": 1001,
    "session_hash": session_hash
}, auth=auth)
time.sleep(3)

# åˆ‡æ¢FLUXæ¨¡å‹
print("æ­£åœ¨åˆ‡æ¢FLUXæ¨¡å‹...")
requests.post(f"{base_url}/queue/join", json={
    "data": ["HyFY-8-Step-Hybrid-v1.0.safetensors"],
    "event_data": None,
    "fn_index": 8,
    "trigger_id": 1002,
    "session_hash": session_hash
}, auth=auth)
time.sleep(15)

# ç”Ÿæˆå›¾ç‰‡
print("æ­£åœ¨ç”Ÿæˆå›¾ç‰‡...")
result = requests.post(f"{base_url}/sdapi/v1/txt2img", json={
    "prompt": "a beautiful cat",
    "steps": 8,
    "width": 1024,
    "height": 1024,
    "cfg_scale": 1.0,
    "sampler_name": "Euler"
}, auth=auth).json()

# ä¿å­˜å›¾ç‰‡
if "images" in result:
    with open("output.png", "wb") as f:
        f.write(base64.b64decode(result["images"][0]))
    print("å›¾ç‰‡å·²ä¿å­˜ä¸º output.png")
else:
    print("é”™è¯¯:", result)
```
</details>

---

## ğŸ”„ å…¶ä»–å†…ç½®æ¨¡å‹

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white; margin: 20px 0;">

å½“å‰æœåŠ¡ä¸­ï¼Œ**Fluxæ¨¡å‹**ä¼šéƒ¨ç½²åˆ°ECSå®ä¾‹ä¸­ã€‚é™¤äº†å½“å‰çš„**Flux-devæ¨¡å‹**ï¼Œè¿˜æ”¯æŒäº†**SD1.5**å’Œ**SD3**æ¨¡å‹ï¼Œå¯åœ¨**WebUI Forgeç•Œé¢**è¿›è¡ŒåŠ¨æ€åˆ‡æ¢ã€‚

</div>

---

<div style="text-align: center; background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
  <h3 style="color: #6c757d; margin: 0;">ğŸ‰ å¼€å§‹ä½ çš„AIè‰ºæœ¯åˆ›ä½œä¹‹æ—…ï¼</h3>
  <p style="color: #6c757d; margin: 10px 0 0 0;">ä½¿ç”¨Flux1-Devæ¨¡å‹ï¼Œè®©æƒ³è±¡åŠ›å˜ä¸ºç°å®</p>
</div>