<div style="background: linear-gradient(135deg, #2563eb, #1e40af); padding: 24px; border-radius: 8px; color: white; text-align: center; margin-bottom: 24px;">
  <h2 style="margin: 0; color: white;">ğŸ¬ Tongyi Wanxiang 2.2 - Image-to-Video - A14B</h2>
  <p style="margin: 8px 0 0 0; opacity: 0.9;">Open and Advanced Large-Scale Video Generation Model - Professional Image-to-Video Edition</p>
  <div style="margin-top: 20px;">
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">ğŸ§  27B Parameters MoE</span>
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">ğŸ¯ 480P & 720P</span>
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">âš¡ Cinematic Aesthetics</span>
  </div>
</div>

## ğŸ“‹ Model Overview

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

**Tongyi Wanxiang 2.2 Image-to-Video A14B** is a revolutionary image-to-video generation model based on Mixture of Experts (MoE) architecture. Compared to the previous Wan2.1, this model achieves comprehensive upgrades in data scale, architectural design, and generation quality, supporting dual-resolution output at 480P and 720P with cinematic-grade aesthetic quality and more stable video synthesis capabilities.

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin: 16px 0;">
  <div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
    <strong>ğŸ·ï¸ Model Identifier</strong><br>
    <div style="margin-top: 8px;">
      <span style="background: #2563eb; color: white; padding: 4px 12px; border-radius: 6px; font-size: 12px; margin-right: 8px;">Wan-AI/Wan2.2-I2V-A14B</span>
    </div>
  </div>

  <div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
    <strong>ğŸ“Š Architecture Scale</strong><br>
    <div style="margin-top: 8px;">
      <span style="background: #059669; color: white; padding: 4px 12px; border-radius: 6px; font-size: 12px; margin-right: 8px;">27B Total Parameters</span>
      <span style="background: #16a34a; color: white; padding: 4px 12px; border-radius: 6px; font-size: 12px;">14B Activated</span>
    </div>
  </div>

  <div style="background: #fef3c7; border-left: 4px solid #d97706; padding: 16px; border-radius: 4px;">
    <strong>ğŸ¯ Core Features</strong><br>
    <div style="margin-top: 8px;">
      <span style="background: #d97706; color: white; padding: 4px 12px; border-radius: 6px; font-size: 12px; margin-right: 8px;">Image-to-Video</span>
      <span style="background: #ea580c; color: white; padding: 4px 12px; border-radius: 6px; font-size: 12px;">Dual Resolution</span>
    </div>
  </div>
</div>

</div>

## ğŸš€ Core Technical Breakthroughs

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h3 style="margin-top: 0; color: #1e40af;">ğŸ§  MoE Mixture of Experts Architecture</h3>
<ul style="margin: 0; padding-left: 20px;">
  <li><strong>Dual Expert Design</strong>: High-noise expert + Low-noise expert</li>
  <li><strong>Intelligent Switching</strong>: Automatic switching based on Signal-to-Noise Ratio (SNR)</li>
  <li><strong>Efficient Inference</strong>: 27B parameters, 14B activated, same cost</li>
  <li><strong>Optimized Denoising</strong>: Specifically optimized for diffusion models</li>
</ul>
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h3 style="margin-top: 0; color: #1e40af;">ğŸ¬ Cinematic-Grade Aesthetic Quality</h3>
<ul style="margin: 0; padding-left: 20px;">
  <li><strong>Fine-grained Labels</strong>: Lighting, composition, contrast, tone</li>
  <li><strong>Controllable Generation</strong>: Precise cinematic style control</li>
  <li><strong>Aesthetic Preferences</strong>: Customizable visual styles</li>
  <li><strong>Professional Quality</strong>: Commercial-grade video output</li>
</ul>
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h3 style="margin-top: 0; color: #1e40af;">ğŸ“ˆ Large-Scale Data Training</h3>
<ul style="margin: 0; padding-left: 20px;">
  <li><strong>Data Expansion</strong>: Images +65.6%, Videos +83.2%</li>
  <li><strong>Multi-dimensional Enhancement</strong>: Motion, semantics, aesthetics all improved</li>
  <li><strong>Top Performance</strong>: Leading among open-source and closed-source models</li>
  <li><strong>Generalization Ability</strong>: Significantly improved adaptability</li>
</ul>
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h3 style="margin-top: 0; color: #1e40af;">âš¡ Efficient Deployment Optimization</h3>
<ul style="margin: 0; padding-left: 20px;">
  <li><strong>Consumer GPUs</strong>: Supports RTX 4090 and similar graphics cards</li>
  <li><strong>Multi-resolution</strong>: Dual support for 480P & 720P</li>
  <li><strong>Stable Synthesis</strong>: Reduced unrealistic camera movements</li>
  <li><strong>Style Diversity</strong>: Enhanced scene adaptability</li>
</ul>
</div>

</div>

## ğŸ”§ Technical Specifications Comparison

<div style="overflow-x: auto; margin: 16px 0;">
<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 6px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <thead style="background: #f8fafc;">
    <tr>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Specification</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Wan2.1-I2V-14B</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Wan2.2-I2V-A14B</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Improvement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">Architecture Type</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Traditional Diffusion Model</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">MoE Mixture of Experts</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><span style="background: #dcfce7; color: #059669; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Architecture Upgrade</span></td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">Parameter Scale</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">14B</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">27B (14B activated)</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><span style="background: #dcfce7; color: #059669; padding: 2px 8px; border-radius: 4px; font-size: 12px;">+93%</span></td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">Supported Resolution</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">480P</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">480P & 720P</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><span style="background: #dcfce7; color: #059669; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Dual Resolution</span></td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">Training Data</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Base Dataset</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Images +65.6%, Videos +83.2%</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><span style="background: #dcfce7; color: #059669; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Significant Expansion</span></td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">Aesthetic Quality</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Standard Quality</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Cinematic-Grade Aesthetics</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><span style="background: #dcfce7; color: #059669; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Quality Leap</span></td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">Motion Stability</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Basic Stability</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Significantly Enhanced</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><span style="background: #dcfce7; color: #059669; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Stability Improvement</span></td>
    </tr>
    <tr>
      <td style="padding: 12px; font-weight: 500;">Integration Ecosystem</td>
      <td style="padding: 12px;">ComfyUI</td>
      <td style="padding: 12px;">ComfyUI + Diffusers + ModelScope</td>
      <td style="padding: 12px;"><span style="background: #dcfce7; color: #059669; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Ecosystem Enhancement</span></td>
    </tr>
  </tbody>
</table>
</div>

## ğŸ’» System Requirements

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

### ğŸ–¥ï¸ Recommended Hardware Configuration

<div style="overflow-x: auto; margin: 16px 0;">
<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 6px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <thead style="background: #f8fafc;">
    <tr>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0;">Component</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0;">Recommended Specification</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0;">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><strong>CPU</strong></td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">16 vCPU</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">High-performance multi-core processor</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><strong>Memory</strong></td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">60 GiB</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Large capacity system memory</td>
    </tr>
    <tr>
      <td style="padding: 12px; font-weight: 500;"><strong>GPU</strong></td>
      <td style="padding: 12px;">1 Ã— NVIDIA A10</td>
      <td style="padding: 12px;">Professional graphics card, 80GB+ VRAM</td>
    </tr>
  </tbody>
</table>
</div>

</div>

## ğŸ¯ ComfyUI Usage Guide

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

### ğŸš€ Step 1: Access Interface

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ”— Interface Access</strong><br>
  Click the access link at the service instance to enter the ComfyUI visual interface
</div>

### ğŸ”§ Step 2: Select Workflow

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px; margin: 16px 0;">
  <strong>ğŸ“‹ Workflow Selection</strong><br>
  Select and open the official workflow from the top-left corner, ensuring use of Wan2.2 dedicated configuration
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 16px; margin: 16px 0; text-align: center;">
  <p style="margin: 8px 0 0 0; color: #64748b; font-size: 14px;">Select the pre-configured Wan2.2 image-to-video workflow</p>
</div>

### ğŸ“¤ Step 3: Upload Image

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin: 16px 0;">

**In the LoadImage node:**
- Select sample images for testing
- Or upload custom images from your computer
- Supports JPEG, PNG, WebP and other formats

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 12px; margin: 12px 0; border-radius: 4px;">
  <strong>ğŸ’¡ Image Requirements</strong><br>
  â€¢ Recommended resolution: 1280Ã—720 or 854Ã—480<br>
  â€¢ File size: Recommended under 10MB<br>
  â€¢ Format support: JPG, PNG, WebP
</div>

</div>

### âœï¸ Step 4: Set Text Description

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0;">

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 8px 0;">âœ… Positive Prompt Examples</h4>
<p style="margin: 0 0 8px 0; color: #065f46;">Fill in the <strong>TextEncode (Positive)</strong> node:</p>
<div style="background: #f8fafc; padding: 8px; border-radius: 4px; font-family: monospace; font-size: 12px;">
"Cinematic lighting, graceful movements, smooth animation, high quality"
</div>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">âŒ Negative Prompt Suggestions</h4>
<p style="margin: 0 0 8px 0; color: #9a3412;">Fill in the <strong>TextEncode (Negative)</strong> node:</p>
<div style="background: #f8fafc; padding: 8px; border-radius: 4px; font-family: monospace; font-size: 12px;">
"bad quality, blurry, distorted, static"
</div>
</div>

</div>

### âš™ï¸ Step 5: Configure Parameters

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin: 16px 0;">

**In the WanVideoImageClipEncode node settings:**

<div style="overflow-x: auto; margin: 16px 0;">
<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 6px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <thead style="background: #f8fafc;">
    <tr>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0;">Parameter Name</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0;">Recommended Value</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0;">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><strong>generation_width</strong></td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">1280 (720P) / 854 (480P)</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Video width</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><strong>generation_height</strong></td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">720 (720P) / 480 (480P)</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Video height</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><strong>num_frames</strong></td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">81</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Number of video frames</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;"><strong>noise_aug_strength</strong></td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">0</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Noise augmentation strength</td>
    </tr>
    <tr>
      <td style="padding: 12px; font-weight: 500;"><strong>adjust_resolution</strong></td>
      <td style="padding: 12px;">True</td>
      <td style="padding: 12px;">Automatically adjust resolution</td>
    </tr>
  </tbody>
</table>
</div>

</div>

### ğŸ¬ Step 6: Execute Workflow

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸš€ Start Generation</strong><br>
  Click the <strong>"Queue Prompt"</strong> button in the right panel to start video generation<br>
  Real-time status can be viewed in the progress bar during generation
</div>

</div>

## ğŸ”Œ API Integration Methods

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

### ğŸ”‘ Authentication Information

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0;">

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">ğŸ” Get Token</h4>
<p style="margin: 0 0 12px 0;">Click the settings button in the top-right corner, open the bottom panel to get API Token</p>
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="color: #2563eb; margin: 0 0 8px 0;">ğŸŒ Get Server Address</h4>
<p style="margin: 0 0 12px 0;">Get the COMFYUI_SERVER address from service instance information</p>
</div>

</div>

### ğŸ”— API Endpoint Description

<div style="overflow-x: auto; margin: 16px 0;">
<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 6px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <thead style="background: #f8fafc;">
    <tr>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Endpoint</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Method</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Function</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-family: monospace; background: #f8fafc;">/queue</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">GET</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Get queue status</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">View current task queue and running status</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-family: monospace; background: #f8fafc;">/prompt</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">POST</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Submit workflow</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Execute Wan2.2 image-to-video task</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-family: monospace; background: #f8fafc;">/history/{prompt_id}</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">GET</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Get execution history</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">View task execution results and output</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-family: monospace; background: #f8fafc;">/upload/image</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">POST</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Upload image</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Upload input image file</td>
    </tr>
    <tr>
      <td style="padding: 12px; font-family: monospace; background: #f8fafc;">/view</td>
      <td style="padding: 12px;">GET</td>
      <td style="padding: 12px;">Download output file</td>
      <td style="padding: 12px;">Get generated result files</td>
    </tr>
  </tbody>
</table>
</div>

</div>

## ğŸ’» Python API Example

<details style="border: 2px solid #2563eb; border-radius: 12px; padding: 20px; margin: 20px 0; background: linear-gradient(145deg, #f8fafc, #eff6ff); box-shadow: 0 8px 16px rgba(37, 99, 235, 0.15);">
<summary style="font-weight: bold; font-size: 18px; color: white; cursor: pointer; padding: 16px; background: linear-gradient(135deg, #2563eb, #1e40af); border-radius: 8px; margin: -20px -20px 20px -20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); transition: all 0.3s ease; display: flex; align-items: center; box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);">
ğŸ Click to expand complete Python API integration code
</summary>

```python
import requests, json, uuid, time, random, os

# ğŸ”§ é…ç½®å‚æ•° - Wan2.2 14B ä¸“ç”¨
COMFYUI_SERVER = "127.0.0.1:8188"  # æœ¬åœ°æœåŠ¡å™¨
COMFYUI_TOKEN = ""  # æœ¬åœ°é€šå¸¸ä¸éœ€è¦token
UNET_HIGH_NOISE_MODEL = "wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors"
UNET_LOW_NOISE_MODEL = "wan2.2_t2v_low_noise_14B_fp8_scaled.safetensors"
CLIP_MODEL = "umt5_xxl_fp8_e4m3fn_scaled.safetensors"
VAE_MODEL = "wan_2.1_vae.safetensors"

# ğŸ¯ é¢„è®¾å‚æ•°
PROMPT = "A close-up of a young woman smiling gently in the rain, raindrops glistening on her face and eyelashes. The video captures the delicate details of her expression and the water droplets, with soft light reflecting off her skin in the rainy atmosphere."
NEG_PROMPT = "è‰²è°ƒè‰³ä¸½ï¼Œè¿‡æ›ï¼Œé™æ€ï¼Œç»†èŠ‚æ¨¡ç³Šä¸æ¸…ï¼Œå­—å¹•ï¼Œé£æ ¼ï¼Œä½œå“ï¼Œç”»ä½œï¼Œç”»é¢ï¼Œé™æ­¢ï¼Œæ•´ä½“å‘ç°ï¼Œæœ€å·®è´¨é‡ï¼Œä½è´¨é‡ï¼ŒJPEGå‹ç¼©æ®‹ç•™ï¼Œä¸‘é™‹çš„ï¼Œæ®‹ç¼ºçš„ï¼Œå¤šä½™çš„æ‰‹æŒ‡ï¼Œç”»å¾—ä¸å¥½çš„æ‰‹éƒ¨ï¼Œç”»å¾—ä¸å¥½çš„è„¸éƒ¨ï¼Œç•¸å½¢çš„ï¼Œæ¯å®¹çš„ï¼Œå½¢æ€ç•¸å½¢çš„è‚¢ä½“ï¼Œæ‰‹æŒ‡èåˆï¼Œé™æ­¢ä¸åŠ¨çš„ç”»é¢ï¼Œæ‚ä¹±çš„èƒŒæ™¯ï¼Œä¸‰æ¡è…¿ï¼ŒèƒŒæ™¯äººå¾ˆå¤šï¼Œå€’ç€èµ°"

class ComfyUIWan22_14BClient:
    def __init__(self, server=COMFYUI_SERVER, token=COMFYUI_TOKEN):
        self.base_url = f"http://{server}"
        self.token = token
        self.client_id = str(uuid.uuid4())
        self.headers = {"Content-Type": "application/json"}
        if token:
            self.headers["Authorization"] = f"Bearer {token}"

    def generate_wan22_14b_t2v(self, prompt, neg_prompt, steps=20, cfg=3.5, width=1280, height=704, frames=81, fps=16):
        """ğŸ¬ Wan2.2 14B æ–‡ç”Ÿè§†é¢‘ç”Ÿæˆ - åŒé˜¶æ®µé‡‡æ ·"""
        print("ğŸ¬ å¼€å§‹ Wan2.2 14B æ–‡ç”Ÿè§†é¢‘ä»»åŠ¡...")

        # å®Œå…¨åŸºäºä½ æä¾›çš„14B JSONå·¥ä½œæµ
        workflow = {
            "6": {
                "inputs": {
                    "text": prompt,
                    "clip": ["38", 0]
                },
                "class_type": "CLIPTextEncode",
                "_meta": {"title": "CLIP Text Encode (Positive Prompt)"}
            },
            "7": {
                "inputs": {
                    "text": neg_prompt,
                    "clip": ["38", 0]
                },
                "class_type": "CLIPTextEncode",
                "_meta": {"title": "CLIP Text Encode (Negative Prompt)"}
            },
            "8": {
                "inputs": {
                    "samples": ["58", 0],
                    "vae": ["39", 0]
                },
                "class_type": "VAEDecode",
                "_meta": {"title": "VAEè§£ç "}
            },
            "37": {
                "inputs": {
                    "unet_name": UNET_HIGH_NOISE_MODEL,
                    "weight_dtype": "default"
                },
                "class_type": "UNETLoader",
                "_meta": {"title": "UNetåŠ è½½å™¨"}
            },
            "38": {
                "inputs": {
                    "clip_name": CLIP_MODEL,
                    "type": "wan",
                    "device": "default"
                },
                "class_type": "CLIPLoader",
                "_meta": {"title": "åŠ è½½CLIP"}
            },
            "39": {
                "inputs": {
                    "vae_name": VAE_MODEL
                },
                "class_type": "VAELoader",
                "_meta": {"title": "åŠ è½½VAE"}
            },
            "54": {
                "inputs": {
                    "shift": 8.000000000000002,
                    "model": ["37", 0]
                },
                "class_type": "ModelSamplingSD3",
                "_meta": {"title": "é‡‡æ ·ç®—æ³•ï¼ˆSD3ï¼‰"}
            },
            "55": {
                "inputs": {
                    "shift": 8,
                    "model": ["56", 0]
                },
                "class_type": "ModelSamplingSD3",
                "_meta": {"title": "é‡‡æ ·ç®—æ³•ï¼ˆSD3ï¼‰"}
            },
            "56": {
                "inputs": {
                    "unet_name": UNET_LOW_NOISE_MODEL,
                    "weight_dtype": "default"
                },
                "class_type": "UNETLoader",
                "_meta": {"title": "UNetåŠ è½½å™¨"}
            },
            "57": {
                "inputs": {
                    "add_noise": "enable",
                    "noise_seed": random.randint(1, 1000000000000000),
                    "steps": steps,
                    "cfg": cfg,
                    "sampler_name": "euler",
                    "scheduler": "simple",
                    "start_at_step": 0,
                    "end_at_step": 10,
                    "return_with_leftover_noise": "enable",
                    "model": ["54", 0],
                    "positive": ["6", 0],
                    "negative": ["7", 0],
                    "latent_image": ["59", 0]
                },
                "class_type": "KSamplerAdvanced",
                "_meta": {"title": "Ké‡‡æ ·å™¨ï¼ˆé«˜çº§ï¼‰"}
            },
            "58": {
                "inputs": {
                    "add_noise": "disable",
                    "noise_seed": 0,
                    "steps": steps,
                    "cfg": cfg,
                    "sampler_name": "euler",
                    "scheduler": "simple",
                    "start_at_step": 10,
                    "end_at_step": 10000,
                    "return_with_leftover_noise": "disable",
                    "model": ["55", 0],
                    "positive": ["6", 0],
                    "negative": ["7", 0],
                    "latent_image": ["57", 0]
                },
                "class_type": "KSamplerAdvanced",
                "_meta": {"title": "Ké‡‡æ ·å™¨ï¼ˆé«˜çº§ï¼‰"}
            },
            "59": {
                "inputs": {
                    "width": width,
                    "height": height,
                    "length": frames,
                    "batch_size": 1
                },
                "class_type": "EmptyHunyuanLatentVideo",
                "_meta": {"title": "ç©ºLatentè§†é¢‘ï¼ˆæ··å…ƒï¼‰"}
            },
            "60": {
                "inputs": {
                    "fps": fps,
                    "images": ["8", 0]
                },
                "class_type": "CreateVideo",
                "_meta": {"title": "åˆ›å»ºè§†é¢‘"}
            },
            "61": {
                "inputs": {
                    "filename_prefix": "video/ComfyUI_14B",
                    "format": "auto",
                    "codec": "auto",
                    "video": ["60", 0]
                },
                "class_type": "SaveVideo",
                "_meta": {"title": "ä¿å­˜è§†é¢‘"}
            }
        }

        print("ğŸ“¤ Wan2.2 14B ...")
        response = requests.post(f"{self.base_url}/prompt", headers=self.headers, json={"prompt": workflow, "client_id": self.client_id})

        if response.status_code != 200:
            raise Exception(f"API: {response.status_code}")

        result = response.json()
        if "error" in result:
            raise Exception(f"Workflow error: {result['error']}")
        if "prompt_id" not in result:
            raise Exception(f"No prompt_id in response: {result}")
        return result["prompt_id"]

    def get_status(self, task_id):
        try:
            queue_data = requests.get(f"{self.base_url}/queue", headers=self.headers).json()
            if any(item[1] == task_id for item in queue_data.get("queue_running", [])):
                return "processing"
            if any(item[1] == task_id for item in queue_data.get("queue_pending", [])):
                return "pending"
            history_response = requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers)
            return "completed" if history_response.status_code == 200 and task_id in history_response.json() else "processing"
        except:
            return "processing"

    def download_video(self, task_id, output_path="wan22_14b_t2v_output.mp4"):
        try:
            response = requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers)
            history = response.json()
            if task_id in history:
                for output in history[task_id]['outputs'].values():
                    if 'videos' in output:
                        filename = output['videos'][0]['filename']
                        video_response = requests.get(f"{self.base_url}/view?filename={filename}", headers=self.headers)
                        with open(output_path, "wb") as f:
                            f.write(video_response.content)
                        return output_path
                    elif 'gifs' in output:
                        filename = output['gifs'][0]['filename']
                        video_response = requests.get(f"{self.base_url}/view?filename={filename}", headers=self.headers)
                        with open(output_path, "wb") as f:
                            f.write(video_response.content)
                        return output_path
        except Exception as e:
            print(f"Download error: {e}")
        return None

def main():
    """ğŸš€ ä¸»å‡½æ•° - æ‰§è¡Œ Wan2.2 14B æ–‡ç”Ÿè§†é¢‘ä»»åŠ¡"""
    client = ComfyUIWan22_14BClient()
    try:

        # 14B æ–‡ç”Ÿè§†é¢‘ç”Ÿæˆ
        task_id = client.generate_wan22_14b_t2v(PROMPT, NEG_PROMPT, 20, 3.5, 1280, 704, 81, 16)
        print(f"ğŸ†” Task ID: {task_id}")

        while True:
            status = client.get_status(task_id)
            print(f"ğŸ“Š Current status: {status}")
            if status == "completed":
                print("âœ… Wan2.2 14B Video ready!");
                break
            elif status == "failed":
                print("âŒ Generation failed!");
                exit(1)
            time.sleep(15)  #

        output_file = client.download_video(task_id, "wan22_14b_t2v_output.mp4")
        print("ğŸ‰ Video downloaded successfully!" if output_file else "âŒ Failed to download video")
        if output_file:
            print(f"ğŸ“ Saved as: {output_file}")

    except Exception as e:
        print(f"âŒ Error: {e}")

if __name__ == "__main__":
    main()

```

</details>

## ğŸ’¡ Prompt Writing Guide

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0;">

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 8px 0;">âœ… Positive Prompt Examples</h4>
<div style="background: #f8fafc; padding: 12px; border-radius: 6px; margin: 8px 0;">
<p style="margin: 0; font-style: italic; color: #065f46; font-size: 14px;">"Summer beach vacation style, a white cat wearing sunglasses sits on a surfboard. The fluffy-furred feline gazes directly at the camera with a relaxed expression."</p>
</div>
<div style="background: #f8fafc; padding: 12px; border-radius: 6px; margin: 8px 0;">
<p style="margin: 0; font-style: italic; color: #065f46; font-size: 14px;">"Cinematic lighting, graceful movements, smooth animation, high quality, professional cinematography"</p>
</div>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">âŒ Negative Prompt Suggestions</h4>
<div style="background: #f8fafc; padding: 12px; border-radius: 6px; margin: 8px 0;">
<p style="margin: 0; font-style: italic; color: #9a3412; font-size: 14px;">"bad quality video, low quality, blurry, distorted, choppy animation, static, bad anatomy"</p>
</div>
<div style="background: #f8fafc; padding: 12px; border-radius: 6px; margin: 8px 0;">
<p style="margin: 0; font-style: italic; color: #9a3412; font-size: 14px;">"unnatural movement, jerky motion, inconsistent, artifacts, noise"</p>
</div>
</div>

</div>

## ğŸ”— Integration Ecosystem

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
  <strong>ğŸ¨ ComfyUI</strong><br>
  <div style="margin-top: 8px;">
    <span style="background: #dcfce7; color: #059669; padding: 4px 12px; border-radius: 12px; font-size: 12px; margin-right: 8px;">âœ… Integrated</span>
    <span style="background: #dbeafe; color: #2563eb; padding: 4px 12px; border-radius: 12px; font-size: 12px;">Multi-language Docs</span>
  </div>
  <p style="margin: 8px 0 0 0; color: #1e40af; font-size: 14px;">Visual workflow, easy to use</p>
</div>

<div style="background: #fef3c7; border-left: 4px solid #d97706; padding: 16px; border-radius: 4px;">
  <strong>ğŸ¤– ModelScope</strong><br>
  <div style="margin-top: 8px;">
    <span style="background: #dcfce7; color: #059669; padding: 4px 12px; border-radius: 12px; font-size: 12px; margin-right: 8px;">âœ… Official Support</span>
    <span style="background: #dbeafe; color: #2563eb; padding: 4px 12px; border-radius: 12px; font-size: 12px;">Native Integration</span>
  </div>
  <p style="margin: 8px 0 0 0; color: #9a3412; font-size: 14px;">Model hosting and distribution</p>
</div>

</div>

## ğŸ¯ Application Scenarios

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #2563eb;">ğŸ¬</div>
<h4 style="margin: 0 0 8px 0; color: #1e40af;">Film Production</h4>
<p style="margin: 0; color: #1e40af;">Cinematic-grade aesthetic quality, professional video production</p>
</div>

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #059669;">ğŸ›ï¸</div>
<h4 style="margin: 0 0 8px 0; color: #059669;">Commercial Marketing</h4>
<p style="margin: 0; color: #065f46;">Product showcase animations, marketing video production</p>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #ea580c;">ğŸ¨</div>
<h4 style="margin: 0 0 8px 0; color: #ea580c;">Artistic Creation</h4>
<p style="margin: 0; color: #9a3412;">Digital art animation, creative video generation</p>
</div>

<div style="background: #f5f3ff; border-left: 4px solid #7c3aed; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #7c3aed;">ğŸ“±</div>
<h4 style="margin: 0 0 8px 0; color: #7c3aed;">Social Media</h4>
<p style="margin: 0; color: #5b21b6;">Short video production, social content creation</p>
</div>

</div>

## ğŸ“„ License and Citation

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

### ğŸ“‹ Open Source License

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ“œ Apache 2.0 License</strong><br>
  â€¢ Free to use and distribute<br>
  â€¢ Commercial-friendly open source license<br>
  â€¢ Complete usage rights granted<br>
  â€¢ Must comply with relevant laws and regulations
</div>

### ğŸ“š Academic Citation

```bibtex
@article{wan2025,
      title={Wan: Open and Advanced Large-Scale Video Generative Models}, 
      author={Team Wan and Ang Wang and Baole Ai and Bin Wen and Chaojie Mao and Chen-Wei Xie and Di Chen and Feiwu Yu and Haiming Zhao and Jianxiao Yang and Jianyuan Zeng and Jiayu Wang and Jingfeng Zhang and Jingren Zhou and Jinkai Wang and Jixuan Chen and Kai Zhu and Kang Zhao and Keyu Yan and Lianghua Huang and Mengyang Feng and Ningyi Zhang and Pandeng Li and Pingyu Wu and Ruihang Chu and Ruili Feng and Shiwei Zhang and Siyang Sun and Tao Fang and Tianxing Wang and Tianyi Gui and Tingyu Weng and Tong Shen and Wei Lin and Wei Wang and Wei Wang and Wenmeng Zhou and Wente Wang and Wenting Shen and Wenyuan Yu and Xianzhong Shi and Xiaoming Huang and Xin Xu and Yan Kou and Yangyu Lv and Yifei Li and Yijing Liu and Yiming Wang and Yingya Zhang and Yitong Huang and Yong Li and You Wu and Yu Liu and Yulin Pan and Yun Zheng and Yuntao Hong and Yupeng Shi and Yutong Feng and Zeyinzi Jiang and Zhen Han and Zhi-Fan Wu and Ziyu Liu},
      journal = {arXiv preprint arXiv:2503.20314},
      year={2025}
}
```

</div>

---

<div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 6px; margin-top: 24px;">
  <p style="margin: 0; color: #64748b; font-size: 14px;">
    ğŸ¬ <strong>Tongyi Wanxiang 2.2 Image-to-Video A14B</strong> | Open and Advanced Large-Scale Video Generation Model
  </p>
  <p style="margin: 4px 0 0 0; color: #94a3b8; font-size: 12px;">
    Â© 2025 Tongyi Wanxiang Team | Apache 2.0 Open Source License | Transform Every Image into Spectacular Video
  </p>
</div>