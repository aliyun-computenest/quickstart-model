# Wan2.1-T2V-1.3B è½»é‡ç‰ˆæ–‡ç”Ÿè§†é¢‘æ¨¡å‹éƒ¨ç½²æŒ‡å—

## æ¨¡å‹ç®€ä»‹

Wan2.1-T2V-1.3B æ˜¯ WanVideo 2.1 ç³»åˆ—çš„è½»é‡ç‰ˆæ–‡æœ¬åˆ°è§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼Œä¸“ä¸ºèµ„æºå—é™ç¯å¢ƒè®¾è®¡ã€‚è¯¥æ¨¡å‹åœ¨ä¿æŒè‰¯å¥½è§†é¢‘ç”Ÿæˆè´¨é‡çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½äº†ç¡¬ä»¶è¦æ±‚ï¼Œä½¿å¾—æ›´å¤šç”¨æˆ·èƒ½å¤Ÿåœ¨æ¶ˆè´¹çº§è®¾å¤‡ä¸Šä½“éªŒæ–‡ç”Ÿè§†é¢‘æŠ€æœ¯ã€‚

### æ ¸å¿ƒç‰¹æ€§
- **è½»é‡åŒ–è®¾è®¡**: ä»…1.3Bå‚æ•°ï¼Œç›¸æ¯”14Bç‰ˆæœ¬å¤§å¹…é™ä½èµ„æºéœ€æ±‚
- **é«˜æ•ˆç”Ÿæˆ**: ä¼˜åŒ–çš„æ¨ç†é€Ÿåº¦ï¼Œé€‚åˆå®æ—¶å’Œæ‰¹é‡ç”Ÿæˆ
- **ä½æ˜¾å­˜éœ€æ±‚**: 6GBæ˜¾å­˜å³å¯è¿è¡Œï¼Œå…¼å®¹æ›´å¤šè®¾å¤‡
- **è´¨é‡ä¿è¯**: åœ¨è½»é‡åŒ–çš„åŒæ—¶ä¿æŒè‰¯å¥½çš„è§†é¢‘ç”Ÿæˆè´¨é‡
- **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æ–‡æœ¬æç¤º
- **çµæ´»éƒ¨ç½²**: æ”¯æŒå•æœºå’Œé›†ç¾¤éƒ¨ç½²æ–¹å¼
- **å¼€æºå‹å¥½**: å®Œå…¨å¼€æºï¼Œæ”¯æŒäºŒæ¬¡å¼€å‘å’Œå®šåˆ¶

### æŠ€æœ¯è§„æ ¼
- **æ¨¡å‹ç±»å‹**: æ–‡æœ¬åˆ°è§†é¢‘ç”Ÿæˆï¼ˆText-to-Videoï¼‰
- **å‚æ•°è§„æ¨¡**: 1.3Bå‚æ•°
- **é‡åŒ–æ–¹å¼**: FP8é‡åŒ–ç‰ˆæœ¬
- **éƒ¨ç½²æ¶æ„**: ACSé›†ç¾¤éƒ¨ç½²
- **æ”¯æŒåˆ†è¾¨ç‡ï¼ˆ480Pï¼‰**:
    - 480Ã—832
    - 832Ã—480
- **æœ€å¤§å¸§æ•°**: 81å¸§
- **æ¨èå¸§ç‡**: 16fps
- **æ¨èæ­¥æ•°**: 15-25æ­¥

### ä¸14Bç‰ˆæœ¬å¯¹æ¯”
- **å‚æ•°è§„æ¨¡**: 1.3B vs 14Bï¼ˆçº¦10å€å·®å¼‚ï¼‰
- **æ˜¾å­˜éœ€æ±‚**: 6GB+ vs 12GB+
- **æ¨ç†é€Ÿåº¦**: æ›´å¿«çš„ç”Ÿæˆé€Ÿåº¦
- **ç”Ÿæˆè´¨é‡**: ç•¥ä½ä½†ä»ä¿æŒè‰¯å¥½æ°´å‡†
- **é€‚ç”¨åœºæ™¯**: æ›´é€‚åˆå¿«é€ŸåŸå‹å’Œæ‰¹é‡ç”Ÿæˆ

## éƒ¨ç½²æ¶æ„

### æ–¹å¼ä¸€ï¼šACSé›†ç¾¤éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ç³»ç»Ÿé…ç½®
- **æ˜¾å­˜**: ppu
- **å†…å­˜**: 96GB

### æ–¹å¼äºŒï¼šECSéƒ¨ç½²
- **æ˜¾å­˜**: A10ç­‰
- **å†…å­˜**: 30GB


## ä½¿ç”¨æŒ‡å—

### ComfyUIä½¿ç”¨

1. **è®¿é—®ç•Œé¢**: å•å‡»"æŸ¥çœ‹Webåº”ç”¨"æ‰“å¼€UIç•Œé¢
2. é€‰æ‹©å·¥ä½œæµ
3. å…¶ä¸­æ¨¡å‹é€‰æ‹©ï¼Œ
3. **è®¾ç½®å‚æ•°**:
    - è¾“å…¥æ–‡æœ¬æè¿°ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰
    - è®¾ç½®è§†é¢‘åˆ†è¾¨ç‡å’Œå¸§æ•°
    - è°ƒæ•´ç”Ÿæˆå‚æ•°ï¼ˆæ­¥æ•°ã€CFGç­‰ï¼‰
3. **å¿«é€Ÿç”Ÿæˆ**: ç‚¹å‡»"Generate"æŒ‰é’®
4. **ä¸‹è½½ç»“æœ**: ç”Ÿæˆå®Œæˆåä¸‹è½½è§†é¢‘æ–‡ä»¶

### ComfyUI APIè°ƒç”¨ç¤ºä¾‹
ç‚¹å‡»å³ä¸Šæ–¹æŒ‰é’®ï¼Œæ‰“å¼€åº•éƒ¨é¢æ¿ï¼Œè·å–tokenï¼š![img_1.png](img_1.png)
COMFYUI_SERVERçš„è·å–å¯å‚è€ƒï¼š![img_2.png](img_2.png)
```python
import requests, json, uuid, time, random

# é…ç½®å‚æ•°
COMFYUI_SERVER, COMFYUI_TOKEN = "è¾“å…¥æ‚¨çš„æœåŠ¡å™¨åœ°å€", "è¾“å…¥æ‚¨çš„token"
T5_MODEL, VIDEO_MODEL, VAE_MODEL = "wan2.1/umt5-xxl-enc-bf16.safetensors", "wan2.1/Wan2_1-T2V-1_3B_fp8_e4m3fn.safetensors", "wan2.1/Wan2_1_VAE_bf16.safetensors"

class ComfyUIClient:
    def __init__(self, server=COMFYUI_SERVER, token=COMFYUI_TOKEN):
        self.base_url, self.token, self.client_id = f"http://{server}", token, str(uuid.uuid4())
        self.headers = {"Content-Type": "application/json", **({"Authorization": f"Bearer {token}"} if token else {})}

    def generate(self, prompt, neg_prompt="", steps=15, cfg=6, width=832, height=480, frames=81):
        workflow = {
            "1": {"inputs": {"model_name": T5_MODEL, "precision": "bf16"}, "class_type": "LoadWanVideoT5TextEncoder"},
            "2": {"inputs": {"positive_prompt": prompt, "negative_prompt": neg_prompt, "force_offload": True, "t5": ["1", 0]}, "class_type": "WanVideoTextEncode"},
            "3": {"inputs": {"model": VIDEO_MODEL, "base_precision": "bf16", "quantization": "fp8_e4m3fn", "load_device": "offload_device"}, "class_type": "WanVideoModelLoader"},
            "4": {"inputs": {"width": width, "height": height, "num_frames": frames}, "class_type": "WanVideoEmptyEmbeds"},
            "5": {"inputs": {"model_name": VAE_MODEL, "precision": "bf16"}, "class_type": "WanVideoVAELoader"},
            "6": {"inputs": {"steps": steps, "cfg": cfg, "shift": 5, "seed": random.randint(1, 1000000), "force_offload": True, "scheduler": "dpm++", "riflex_freq_index": 0, "model": ["3", 0], "text_embeds": ["2", 0], "image_embeds": ["4", 0]}, "class_type": "WanVideoSampler"},
            "7": {"inputs": {"enable_vae_tiling": True, "tile_x": 272, "tile_y": 272, "tile_stride_x": 144, "tile_stride_y": 128, "vae": ["5", 0], "samples": ["6", 0]}, "class_type": "WanVideoDecode"},
            "8": {"inputs": {"frame_rate": 16, "loop_count": 0, "filename_prefix": "generated_video", "format": "video/h264-mp4", "save_output": True, "pingpong": False, "images": ["7", 0]}, "class_type": "VHS_VideoCombine"}
        }
        response = requests.post(f"{self.base_url}/prompt", headers=self.headers, json={"prompt": workflow, "client_id": self.client_id})
        print(f"API Response: {response.text}")
        result = response.json()
        if "error" in result: raise Exception(f"Workflow error: {result['error']}")
        if "prompt_id" not in result: raise Exception(f"No prompt_id in response: {result}")
        return result["prompt_id"]

    def get_status(self, task_id):
        try:
            queue_data = requests.get(f"{self.base_url}/queue", headers=self.headers).json()
            if any(item[1] == task_id for item in queue_data.get("queue_running", [])): return "processing"
            if any(item[1] == task_id for item in queue_data.get("queue_pending", [])): return "pending"
            history_response = requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers)
            return "completed" if history_response.status_code == 200 and task_id in history_response.json() else "processing"
        except: return "processing"

    def download_video(self, task_id, output_path="generated_video.mp4"):
        try:
            response = requests.get(f"{self.base_url}/history/{task_id}", headers=self.headers)
            history = response.json()
            if task_id in history:
                for output in history[task_id]['outputs'].values():
                    if 'gifs' in output:
                        filename = output['gifs'][0]['filename']
                        video_response = requests.get(f"{self.base_url}/view?filename={filename}", headers=self.headers)
                        with open(output_path, "wb") as f: f.write(video_response.content)
                        return output_path
        except Exception as e: print(f"Download error: {e}")
        return None

def main():
    client = ComfyUIClient()
    try:
        print("ğŸ¬ å¼€å§‹æ–‡ç”Ÿè§†é¢‘ä»»åŠ¡...")
        task_id = client.generate("A beautiful anime girl with long black hair dancing gracefully", "low quality, blurry, distorted", 15, 6, 832, 480, 81)
        print(f"ğŸ†” Task ID: {task_id}")
        
        while True:
            status = client.get_status(task_id)
            print(f"ğŸ“Š Current status: {status}")
            if status == "completed": print("âœ… Video ready!"); break
            elif status == "failed": print("âŒ Generation failed!"); exit(1)
            time.sleep(10)
            
        output_file = client.download_video(task_id, "generated_video.mp4")
        print("ğŸ‰ Video downloaded successfully!" if output_file else "âŒ Failed to download video")
        if output_file: print(f"ğŸ“ Saved as: {output_file}")
        
    except Exception as e: print(f"âŒ Error: {e}")

if __name__ == "__main__": main()

```


## æ€§èƒ½å¯¹æ¯”ä¸é€‰æ‹©å»ºè®®

### ä¸14Bç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | T2V-1.3B | T2V-14B |
|------|----------|---------|
| å‚æ•°è§„æ¨¡ | 1.3B | 14B |
| æ˜¾å­˜éœ€æ±‚ | 6GB+ | 12GB+ |
| ç”Ÿæˆé€Ÿåº¦ | å¿« | ä¸­ç­‰ |
| è§†é¢‘è´¨é‡ | è‰¯å¥½ | ä¼˜ç§€ |
| ç»†èŠ‚ä¸°å¯Œåº¦ | ä¸­ç­‰ | é«˜ |
| æ–‡æœ¬ç†è§£ | è‰¯å¥½ | ä¼˜ç§€ |
| é€‚ç”¨åœºæ™¯ | å¿«é€Ÿç”Ÿæˆã€æ‰¹é‡å¤„ç† | é«˜è´¨é‡åˆ›ä½œ |

## æœ€ä½³å®è·µ

### æç¤ºè¯ä¼˜åŒ–
1. **ç®€æ´æ˜ç¡®**: è½»é‡ç‰ˆå¯¹ç®€æ´æç¤ºè¯å“åº”æ›´å¥½
2. **å…³é”®è¯çªå‡º**: ä½¿ç”¨æ ¸å¿ƒå…³é”®è¯æè¿°ä¸»è¦å†…å®¹
3. **é¿å…è¿‡åº¦å¤æ‚**: å‡å°‘è¿‡äºå¤æ‚çš„åœºæ™¯æè¿°
4. **é£æ ¼æŒ‡å®š**: æ˜ç¡®æŒ‡å®šè§†é¢‘é£æ ¼å’Œæ°›å›´


## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ˜¾å­˜ä¸è¶³**: é™ä½åˆ†è¾¨ç‡æˆ–å¯ç”¨lowvramæ¨¡å¼
2. **ç”Ÿæˆè´¨é‡ä¸ä½³**: å¢åŠ æ­¥æ•°æˆ–è°ƒæ•´CFG
3. **é€Ÿåº¦è¿‡æ…¢**: æ£€æŸ¥é‡åŒ–è®¾ç½®å’Œoffloadé…ç½®
4. **æ¨¡å‹åŠ è½½å¤±è´¥**: ç¡®è®¤æ¨¡å‹æ–‡ä»¶è·¯å¾„å’Œæƒé™



## ç›¸å…³èµ„æº

- [WanVideo 2.1 å®˜æ–¹æ–‡æ¡£](https://github.com/WanVideo/Wan2.1)
- [è½»é‡ç‰ˆæ¨¡å‹ä¸‹è½½](https://huggingface.co/WanVideo/Wan2.1-T2V-1.3B)
- [ComfyUI WanVideoæ’ä»¶](https://github.com/kijai/ComfyUI-WanVideoWrapper)
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://docs.wanvideo.ai/optimization)
- [ç¤¾åŒºè®¨è®ºåŒº](https://github.com/WanVideo/Wan2.1/discussions)