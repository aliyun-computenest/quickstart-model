<div style="background: linear-gradient(135deg, #2563eb, #1e40af); padding: 24px; border-radius: 8px; color: white; text-align: center; margin-bottom: 24px;">
  <h2 style="margin: 0; color: white;">ğŸ¤ CosyVoice è¯­éŸ³åˆæˆæœåŠ¡</h2>
  <p style="margin: 8px 0 0 0; opacity: 0.9;">é˜¿é‡Œäº‘æ¨å‡ºçš„å…ˆè¿›è¯­éŸ³åˆæˆæŠ€æœ¯</p>
</div>
CosyVoiceæ˜¯é˜¿é‡Œäº‘æ¨å‡ºçš„ä¸€æ¬¾è¯­éŸ³åˆæˆæœåŠ¡ï¼Œå®ƒèƒ½å¤Ÿå°†æ–‡æœ¬è½¬æ¢æˆè‡ªç„¶æµç•…çš„è¯­éŸ³ã€‚è¿™é¡¹æœåŠ¡æ”¯æŒå¤šç§è¯­è¨€å’Œæ–¹è¨€ï¼Œå¯ä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ï¼Œå¦‚æ–°é—»æ’­æŠ¥ã€æœ‰å£°è¯»ç‰©åˆ¶ä½œã€æ™ºèƒ½å®¢æœç­‰ã€‚é€šè¿‡ä½¿ç”¨å…ˆè¿›çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼ŒCosyVoiceèƒ½å¤Ÿç”Ÿæˆæ¥è¿‘çœŸäººå‘å£°æ•ˆæœçš„å£°éŸ³ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ ä¸°å¯Œå’Œäººæ€§åŒ–çš„äº¤äº’ä½“éªŒã€‚

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸŒ å¤šè¯­è¨€æ”¯æŒ</strong><br>
  â€¢ æ”¯æŒçš„è¯­è¨€: ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€ä¸­æ–‡æ–¹è¨€ï¼ˆç²¤è¯­ã€å››å·è¯ã€ä¸Šæµ·è¯ã€å¤©æ´¥è¯ã€æ­¦æ±‰è¯ç­‰ï¼‰
â€¢ è·¨è¯­è¨€åŠæ··åˆè¯­è¨€ï¼šæ”¯æŒé›¶æ ·æœ¬çš„è·¨è¯­è¨€å’Œä»£ç è½¬æ¢åœºæ™¯çš„è¯­éŸ³å…‹éš†ã€‚
</div>

<div style="background: #dcfce7; border-left: 4px solid #059669; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>âš¡ è¶…ä½å»¶è¿Ÿ</strong><br>
  â€¢ åŒå‘æµæ”¯æŒ: CosyVoice 2.0 é›†æˆäº†ç¦»çº¿å’Œæµå¼å»ºæ¨¡æŠ€æœ¯ã€‚
â€¢ å¿«é€Ÿé¦–åŒ…åˆæˆ: åœ¨ä¿æŒé«˜è´¨é‡éŸ³é¢‘è¾“å‡ºçš„åŒæ—¶ï¼Œå®ç°äº†ä½è‡³150æ¯«ç§’çš„å»¶è¿Ÿã€‚
</div>

<div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ¯ é«˜ç²¾åº¦</strong><br>
  â€¢ æ”¹è¿›å‘éŸ³: ä¸CosyVoice 1.0ç›¸æ¯”ï¼Œå‡å°‘äº†30%åˆ°50%çš„å‘éŸ³é”™è¯¯ã€‚
â€¢ åŸºå‡†æµ‹è¯•æˆå°±: åœ¨Seed-TTSè¯„ä¼°é›†çš„å›°éš¾æµ‹è¯•é›†ä¸­è¾¾åˆ°äº†æœ€ä½å­—ç¬¦é”™è¯¯ç‡ã€‚
</div>

<div style="background: #e0e7ff; border-left: 4px solid #6366f1; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ›¡ï¸ å¼ºç¨³å®šæ€§</strong><br>
  â€¢ éŸ³è‰²ä¸€è‡´æ€§: ç¡®ä¿äº†åœ¨é›¶æ ·æœ¬å’Œè·¨è¯­è¨€è¯­éŸ³åˆæˆä¸­çš„å¯é éŸ³è‰²ä¸€è‡´æ€§ã€‚
â€¢ è·¨è¯­è¨€åˆæˆ: ç›¸æ¯”1.0ç‰ˆæœ¬æœ‰äº†æ˜¾è‘—æå‡ã€‚
</div>

<div style="background: #fdf2f8; border-left: 4px solid #ec4899; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸµ è‡ªç„¶ä½“éªŒ</strong><br>
  â€¢ å¢å¼ºéŸµå¾‹å’ŒéŸ³è´¨: æ”¹å–„äº†åˆæˆéŸ³é¢‘çš„ä¸€è‡´æ€§ï¼Œå°†MOSè¯„åˆ†ä»5.4æé«˜åˆ°äº†5.53ã€‚
â€¢ æƒ…æ„Ÿå’Œæ–¹è¨€çµæ´»æ€§: ç°åœ¨æ”¯æŒæ›´å¤šç»†ç²’åº¦çš„æƒ…æ„Ÿæ§åˆ¶å’Œå£éŸ³è°ƒæ•´ã€‚
</div>


<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 24px 0 16px 0;">
  <h3 style="margin: 0; color: #1e40af; font-size: 1.3rem;">ğŸ“– ä½¿ç”¨è¯´æ˜</h3>
</div>
åœ¨å®Œæˆæ¨¡å‹éƒ¨ç½²åï¼Œå¯ä»¥åœ¨è®¡ç®—å·¢æœåŠ¡å®ä¾‹æ¦‚è§ˆé¡µé¢çœ‹åˆ°æ¨¡å‹çš„ä½¿ç”¨æ–¹å¼ï¼Œé‡Œé¢æä¾›äº†Apiè°ƒç”¨ç¤ºä¾‹ã€å†…ç½‘è®¿é—®åœ°å€ã€å…¬ç½‘è®¿é—®åœ°å€å’ŒApiKeyï¼Œä¸‹é¢ä¼šåˆ†åˆ«ä»‹ç»å¦‚ä½•è®¿é—®ä½¿ç”¨ã€‚
<div style="text-align: center; margin: 20px 0;">
  <img src="1.png" alt="1.png" style="max-width: 100%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
  <p style="color: #64748b; font-size: 14px; margin-top: 8px;">1.png</p>
</div>
<h4 style="color: #1e40af; margin: 20px 0 12px 0; font-size: 1.1rem;">ğŸ”¹ APIè°ƒç”¨</h4>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">
  <h4 style="margin: 0 0 12px 0; color: #1e40af;">ğŸ Python è°ƒç”¨ç¤ºä¾‹</h4>
  <p style="color: #64748b; margin: 0;">ä»¥ä¸‹ä¸ºå®Œæ•´çš„ Python è°ƒç”¨ç¤ºä¾‹ä»£ç ï¼š</p>
</div>
ä»¥ä¸‹ä¸º Python ç¤ºä¾‹ä»£ç ï¼š å…¶ä¸­${ApiKey}éœ€è¦å¡«å†™é¡µé¢ä¸Šçš„ApiKeyï¼›${ServerUrl}éœ€è¦å¡«å†™é¡µé¢ä¸Šçš„å…¬ç½‘åœ°å€æˆ–å†…ç½‘åœ°å€ã€‚

``` python
import argparse
import logging
import os
import requests
import torch
import torchaudio
import numpy as np
from contextlib import closing

# é…ç½®æ—¥å¿—
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')

def build_url(args):
    """æ„å»ºAPIè¯·æ±‚URL"""
    return f"http://{args.host}:{args.port}/inference_{args.mode}"

def create_payload(args):
    """åˆ›å»ºè¯·æ±‚è´Ÿè½½"""
    payload = {'tts_text': args.tts_text}
    
    if args.mode == 'sft':
        payload['spk_id'] = args.spk_id
    elif args.mode == 'instruct':
        payload.update({
            'spk_id': args.spk_id,
            'instruct_text': args.instruct_text
        })
    return payload

def create_files(args):
    """åˆ›å»ºæ–‡ä»¶ä¸Šä¼ å‚æ•°"""
    if args.mode in ['zero_shot', 'cross_lingual']:
        return [('prompt_wav', 
                ('prompt_wav', open(args.prompt_wav, 'rb'), 'application/octet-stream'))]
    return None

def main():
    try:
        # è·å–å‚æ•°
        args = get_args()
        
        # æ„å»ºè¯·æ±‚å‚æ•°
        url = build_url(args)
        headers = {
            "X-API-TOKEN": os.getenv("TTS_API_KEY", "${ApiKey}"),  # ä»ç¯å¢ƒå˜é‡è·å–å¯†é’¥
            "User-Agent": "TTS Client/1.0"
        }
        
        # åˆ›å»ºè¯·æ±‚å‚æ•°
        payload = create_payload(args)
        files = create_files(args)
        
        # å‘èµ·è¯·æ±‚
        with closing(requests.get(
            url,
            params=payload,
            files=files,
            headers=headers,
            stream=True,
            timeout=30
        )) as response:
            response.raise_for_status()
            
            # å¤„ç†éŸ³é¢‘æ•°æ®
            audio_data = b''
            for chunk in response.iter_content(chunk_size=16000):
                if chunk:
                    audio_data += chunk
            
            # è½¬æ¢éŸ³é¢‘æ ¼å¼
            audio_tensor = torch.from_numpy(
                np.frombuffer(audio_data, dtype=np.int16)
            ).unsqueeze(0)
            
            # ä¿å­˜éŸ³é¢‘æ–‡ä»¶
            torchaudio.save(args.tts_wav, audio_tensor, args.target_sr)
            logging.info(f"éŸ³é¢‘å·²ä¿å­˜åˆ°: {args.tts_wav}")
            
    except requests.exceptions.RequestException as e:
        logging.error(f"è¯·æ±‚å¤±è´¥: {e}")
    except Exception as e:
        logging.error(f"å‘ç”Ÿé”™è¯¯: {e}", exc_info=True)

def get_args():
    """è§£æå‘½ä»¤è¡Œå‚æ•°"""
    parser = argparse.ArgumentParser(description='TTSå®¢æˆ·ç«¯')
    
    # æœåŠ¡å™¨é…ç½®
    parser.add_argument('--host', type=str, default=os.getenv("TTS_HOST", "localhost"))
    parser.add_argument('--port', type=int, default=80)
    parser.add_argument('--target-sr', type=int, default=22050, help='ç›®æ ‡é‡‡æ ·ç‡')
    
    # æ¨¡å¼é…ç½®
    parser.add_argument('--mode', default='sft',
                        choices=['sft', 'zero_shot', 'cross_lingual', 'instruct'],
                        help='è¯·æ±‚æ¨¡å¼')
    
    # æ–‡æœ¬å‚æ•°
    parser.add_argument('--tts_text', type=str, 
                        default='ä½ å¥½ï¼Œæˆ‘æ˜¯é€šä¹‰åƒé—®è¯­éŸ³åˆæˆå¤§æ¨¡å‹ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ')
    
    # æ¨¡å¼ç›¸å…³å‚æ•°
    parser.add_argument('--spk_id', type=str, default='ä¸­æ–‡å¥³')
    parser.add_argument('--prompt_text', type=str, 
                        default='å¸Œæœ›ä½ ä»¥åèƒ½å¤Ÿåšçš„æ¯”æˆ‘è¿˜å¥½å‘¦ã€‚')
    parser.add_argument('--prompt_wav', type=str, 
                        default='../../../asset/zero_shot_prompt.wav')
    parser.add_argument('--instruct_text', type=str, 
                        default='Theo \'Crimson\', is a fiery, passionate rebel leader. '
                              'Fights with fervor for justice, but struggles with impulsiveness.')
    
    # è¾“å‡ºå‚æ•°
    parser.add_argument('--tts_wav', type=str, default='demo.wav')
    
    args = parser.parse_args()
    return args

if __name__ == "__main__":
    main()


```

<h4 style="color: #1e40af; margin: 20px 0 12px 0; font-size: 1.1rem;">ğŸ”¹ Webåº”ç”¨</h4>
ç‚¹å‡»å®‰å…¨ä»£ç†è®¿é—®ï¼Œè·³è½¬åˆ°å¯¹åº”çš„é¡µé¢å°±å¯ä»¥ç›´æ¥è¿›è¡Œæ¨¡å‹æœåŠ¡åœ¨çº¿è®¿é—®äº†ã€‚

<div style="background: linear-gradient(135deg, #f8fafc, #eff6ff); border: 1px solid #bfdbfe; border-radius: 8px; padding: 24px; margin: 32px 0;">
  <h3 style="margin: 0 0 16px 0; color: #1e40af;">ğŸ¯ å¿«é€Ÿå¼€å§‹</h3>
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
    <div style="background: white; padding: 16px; border-radius: 6px; border: 1px solid #e2e8f0;">
      <h4 style="margin: 0 0 8px 0; color: #1e40af;">1ï¸âƒ£ è·å–è®¿é—®ä¿¡æ¯</h4>
      <p style="margin: 0; color: #64748b; font-size: 14px;">åœ¨è®¡ç®—å·¢æœåŠ¡å®ä¾‹æ¦‚è§ˆé¡µé¢è·å– ApiKey å’Œè®¿é—®åœ°å€</p>
    </div>
    <div style="background: white; padding: 16px; border-radius: 6px; border: 1px solid #e2e8f0;">
      <h4 style="margin: 0 0 8px 0; color: #1e40af;">2ï¸âƒ£ é€‰æ‹©è°ƒç”¨æ–¹å¼</h4>
      <p style="margin: 0; color: #64748b; font-size: 14px;">æ”¯æŒ Python API è°ƒç”¨å’Œ Web åº”ç”¨ç›´æ¥è®¿é—®</p>
    </div>
    <div style="background: white; padding: 16px; border-radius: 6px; border: 1px solid #e2e8f0;">
      <h4 style="margin: 0 0 8px 0; color: #1e40af;">3ï¸âƒ£ å¼€å§‹ä½¿ç”¨</h4>
      <p style="margin: 0; color: #64748b; font-size: 14px;">é…ç½®å‚æ•°åå³å¯äº«å—é«˜è´¨é‡çš„è¯­éŸ³åˆæˆæœåŠ¡</p>
    </div>
  </div>
</div>

<div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 6px; margin-top: 24px;">
  <p style="margin: 0; color: #64748b; font-size: 14px;">
    ğŸ¤ <strong>CosyVoice</strong> | è®©æ–‡å­—æ‹¥æœ‰ç”Ÿå‘½åŠ›çš„å£°éŸ³
  </p>
</div>