<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="è®¡ç®—å·¢æ˜¯é˜¿é‡Œäº‘å¼€æ”¾ç»™ä¼ä¸šåº”ç”¨æœåŠ¡å•†çš„æœåŠ¡ç®¡ç†å¹³å°ã€‚æœåŠ¡å•†èƒ½å¤Ÿåœ¨è®¡ç®—å·¢ä¸Šå‘å¸ƒç§æœ‰åŒ–éƒ¨ç½²æœåŠ¡ï¼Œä¸ºå…¶å®¢æˆ·æä¾›äº‘ä¸Šè½¯ä»¶ä¸€é”®éƒ¨ç½²çš„èƒ½åŠ›ï¼›åŒæ—¶ä¹Ÿæ”¯æŒå…¨æ‰˜ç®¡æ¨¡å¼çš„æœåŠ¡ï¼Œèµ‹èƒ½æœåŠ¡å•†æ‰˜ç®¡å…¶å®¢æˆ·èµ„æºã€‚">
  <title>Mllm instructions - Aliyun è®¡ç®—å·¢ x Demo</title>

  <link rel="shortcut icon" href="../../img/favicon.ico">

  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
  <link rel="stylesheet" href="../../css/theme.css">
  

  

  
  

  
    <script src="../../search/main.js"></script>
  

  

  <script src="../../js/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <div class="container">
    <div class="nav">
      <div class="nav-inner">
        <div class="logo">
          <img src="./img/logo-2x.png">
        </div>
        <div class="nav-list">
          <ul>
          
              <li><a href="#_1">ğŸ“– ä½¿ç”¨è¯´æ˜</a></li>
              
                  <li><a href="#api">ğŸ”Œ API è°ƒç”¨æ–¹å¼</a></li>
                  
                      <li class="li-h3"><a href="#curl">ğŸ–¥ï¸ Curl å‘½ä»¤è°ƒç”¨</a></li>
                  
                      <li class="li-h3"><a href="#python-sdk">ğŸ Python SDK è°ƒç”¨</a></li>
                  
              
                  <li><a href="#web">ğŸŒ Web åº”ç”¨è®¿é—®</a></li>
                  
              
          
          </ul>
        </div>
      </div>
    </div>
    <div class="content theme-github">
      
      <div class="content-inner">        
        
        <h2 id="_1">ğŸ“– ä½¿ç”¨è¯´æ˜</h2>
<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ’¡ éƒ¨ç½²å®Œæˆå</strong><br>
  åœ¨å®Œæˆæ¨¡å‹éƒ¨ç½²åï¼Œå¯ä»¥åœ¨è®¡ç®—å·¢æœåŠ¡å®ä¾‹æ¦‚è§ˆé¡µé¢çœ‹åˆ°æ¨¡å‹çš„ä½¿ç”¨æ–¹å¼ï¼Œé‡Œé¢æä¾›äº† API è°ƒç”¨ç¤ºä¾‹ã€å†…ç½‘è®¿é—®åœ°å€ã€å…¬ç½‘è®¿é—®åœ°å€ï¼ˆå¼€å¯å…¬ç½‘è®¿é—®åä¼šæœ‰ï¼‰å’Œ Api_Keyã€‚
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">
  <div style="text-align: center; margin-bottom: 16px;">
    <img src="../image-cn/img-llm-use-desc.png" alt="æ¨¡å‹ä½¿ç”¨è¯´æ˜ç•Œé¢" style="max-width: 100%; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
  </div>
</div>

<h3 id="api">ğŸ”Œ API è°ƒç”¨æ–¹å¼</h3>
<h4 id="curl">ğŸ–¥ï¸ Curl å‘½ä»¤è°ƒç”¨</h4>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

<div style="text-align: center; margin-bottom: 16px;">
  <img src="../image-cn/img-api-call.png" alt="APIè°ƒç”¨ç¤ºä¾‹" style="max-width: 100%; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ“‹ å‚æ•°è¯´æ˜</strong><br>
  â€¢ <code>${ServerIP}</code>ï¼šå†…ç½‘åœ°å€æˆ–å…¬ç½‘åœ°å€ä¸­çš„ IP åœ°å€<br>
  â€¢ <code>${ApiKey}</code>ï¼šé¡µé¢æä¾›çš„ ApiKey<br>
  â€¢ <code>${ModelName}</code>ï¼šæ¨¡å‹åç§°
</div>

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ–¼ï¸ å›¾ç‰‡æ ¼å¼æ”¯æŒ</strong><br>
  <code>image_url</code> å‚æ•°æ”¯æŒä¸¤ç§æ ¼å¼ï¼š<br>
  â€¢ <strong>HTTP URL</strong>ï¼šå¦‚ <code>https://modelscope.oss-cn-beijing.aliyuncs.com/resource/qwen.png</code><br>
  â€¢ <strong>Base64 ç¼–ç </strong>ï¼š<code>data:image/jpeg;base64,&lt;å›¾ç‰‡çš„ base64 ç¼–ç æ ¼å¼&gt;</code>
</div>

Curl å‘½ä»¤è°ƒç”¨å¯ä»¥ç›´æ¥ä½¿ç”¨æœåŠ¡å®ä¾‹æ¦‚è§ˆé¡µé¢ä¸­çš„ API è°ƒç”¨ç¤ºä¾‹ï¼Œè°ƒç”¨æ¨¡å‹ API çš„å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š


<pre><code class="language-bash">curl -X Post http://${ServerIP}:8000/v1/chat/completions \
    -H &quot;Content-Type: application/json&quot; \
    -H &quot;Authorization: ${ApiKey}&quot; \
    -d '{
        &quot;model&quot;: &quot;${ModelName}&quot;,
        &quot;messages&quot;: [
        {
            &quot;role&quot;: &quot;system&quot;,
            &quot;content&quot;: &quot;You are a helpful assistant.&quot;
        },
        {
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: [
                {
                    &quot;type&quot;: &quot;image_url&quot;,
                    &quot;image_url&quot;: {
                        &quot;url&quot;: &quot;data:image/jpeg;base64,&lt;å›¾ç‰‡çš„ base64 ç¼–ç æ ¼å¼&gt;&quot;
                    }
                },
                {
                    &quot;type&quot;: &quot;text&quot;,
                    &quot;text&quot;: &quot;How many sheep are there in the picture?&quot;
                }
            ]
        }
        ]
    }'
</code></pre>


</div>

<h4 id="python-sdk">ğŸ Python SDK è°ƒç”¨</h4>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>âš™ï¸ é…ç½®è¯´æ˜</strong><br>
  â€¢ <code>${ApiKey}</code>ï¼šå¡«å†™é¡µé¢ä¸Šçš„ ApiKey<br>
  â€¢ <code>${ServerUrl}</code>ï¼šå¡«å†™é¡µé¢ä¸Šçš„å…¬ç½‘åœ°å€æˆ–å†…ç½‘åœ°å€ï¼Œéœ€è¦å¸¦ä¸Š <code>/v1</code>
</div>

ä»¥ä¸‹ä¸º Python ç¤ºä¾‹ä»£ç ï¼Œæ”¯æŒå›¾åƒå’Œè§†é¢‘å¤„ç†ï¼š


<pre><code class="language-python">import base64
import requests
from openai import OpenAI

##### API é…ç½® #####
openai_api_key = &quot;${ApiKey}&quot;
openai_api_base = &quot;${ServerUrl}&quot;

client = OpenAI(
    api_key=openai_api_key,
    base_url=openai_api_base,
)

models = client.models.list()
model = models.data[0].id


def encode_base64_content_from_url(content_url: str) -&gt; str:
    &quot;&quot;&quot;Encode a content retrieved from a remote url to base64 format.&quot;&quot;&quot;

    with requests.get(content_url) as response:
        response.raise_for_status()
        result = base64.b64encode(response.content).decode(&quot;utf-8&quot;)

    return result


def infer_image():
    image_url = &quot;https://qianwen-res.oss-cn-beijing.aliyuncs.com/QVQ/demo.png&quot;

    stream = True

    image_base64 = encode_base64_content_from_url(image_url)

    chat_completion_from_base64 = client.chat.completions.create(
        messages=[
            {
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: [
                    {
                        &quot;type&quot;: &quot;text&quot;,
                        &quot;text&quot;: &quot;ä½¿ç”¨ä¸­æ–‡å›ç­”ï¼Œå›¾ä¸­æ–¹æ¡†å¤„åº”è¯¥æ˜¯æ•°å­—å¤šå°‘?&quot;,
                    },
                    {
                        &quot;type&quot;: &quot;image_url&quot;,
                        &quot;image_url&quot;: {&quot;url&quot;: f&quot;data:image/jpeg;base64,{image_base64}&quot;},
                    },
                ],
            }
        ],
        model=model,
        max_completion_tokens=1024,
        stream=stream,
    )

    if stream:
        for chunk in chat_completion_from_base64:
            print(chunk.choices[0].delta.content, end=&quot;&quot;)
    else:
        result = chat_completion_from_base64.choices[0].message.content
        print(result)


def infer_video():
    video_url = &quot;https://pai-quickstart-predeploy-hangzhou.oss-cn-hangzhou.aliyuncs.com/modelscope/algorithms/ms-swift/video_demo.mp4&quot;

    stream = True

    video_base64 = encode_base64_content_from_url(video_url)

    chat_completion_from_base64 = client.chat.completions.create(
        messages=[
            {
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: [
                    {&quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;è¯·æè¿°ä¸‹è§†é¢‘å†…å®¹&quot;},
                    {
                        &quot;type&quot;: &quot;video_url&quot;,
                        &quot;video_url&quot;: {&quot;url&quot;: f&quot;data:video/mp4;base64,{video_base64}&quot;},
                    },
                ],
            }
        ],
        model=model,
        max_completion_tokens=512,
        stream=stream,
    )

    if stream:
        for chunk in chat_completion_from_base64:
            print(chunk.choices[0].delta.content, end=&quot;&quot;)
    else:
        result = chat_completion_from_base64.choices[0].message.content
        print(result)


if __name__ == &quot;__main__&quot;:
    infer_image()
    infer_video()
</code></pre>


</div>

<h3 id="web">ğŸŒ Web åº”ç”¨è®¿é—®</h3>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

#### ğŸ“± è®¿é—®æ­¥éª¤

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="margin-top: 0; color: #1e40af;">ğŸ”— æ­¥éª¤ä¸€ï¼šè·å–è®¿é—®é“¾æ¥</h4>
<p style="margin: 0;">åœ¨æœåŠ¡å®ä¾‹æ¦‚è§ˆé¡µé¢ä¸­ï¼Œç‚¹å‡» Web åº”ç”¨å¯¹åº”çš„é“¾æ¥ï¼Œå³å¯ç›´æ¥è¿›è¡Œæ¨¡å‹æœåŠ¡ Web è®¿é—®ã€‚</p>
</div>

<div style="background: #dcfce7; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="margin-top: 0; color: #059669;">ğŸ’¬ æ­¥éª¤äºŒï¼šå¼€å§‹å¯¹è¯</h4>
<p style="margin: 0;">åœ¨æ¨¡å‹æœåŠ¡ Web é¡µé¢è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜ï¼Œå°±å¯ä»¥å’Œå¤§æ¨¡å‹è¿›è¡Œå¯¹è¯äº†ã€‚</p>
</div>

</div>

#### ğŸ–¼ï¸ ç•Œé¢å±•ç¤º

<div style="text-align: center; margin: 20px 0;">
  <img src="../image-cn/img-web.png" alt="Webåº”ç”¨è®¿é—®å…¥å£" style="max-width: 100%; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;">
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ’¡ è®¿é—®æç¤º</strong><br>
  åœ¨æœåŠ¡å®ä¾‹æ¦‚è§ˆé¡µé¢ä¸­æ‰¾åˆ° Web åº”ç”¨å¯¹åº”çš„é“¾æ¥ï¼Œç‚¹å‡»å³å¯ç›´æ¥è®¿é—®æ¨¡å‹æœåŠ¡çš„ Web ç•Œé¢ã€‚
</div>

<div style="text-align: center; margin: 20px 0;">
  <img src="../image-cn/img-appflow.png" alt="æ¨¡å‹å¯¹è¯ç•Œé¢" style="max-width: 100%; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;">
</div>

<div style="background: #dcfce7; border-left: 4px solid #059669; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>âœ… ä½¿ç”¨è¯´æ˜</strong><br>
  åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ‚¨çš„é—®é¢˜æˆ–éœ€æ±‚ï¼Œç³»ç»Ÿå°†å®æ—¶å“åº”å¹¶æä¾›ç›¸åº”çš„æ¨¡å‹æœåŠ¡ï¼Œå¯¹äºå¤šæ¨¡æ€éœ€è¦è¾“å…¥å›¾ç‰‡çš„åœºæ™¯ï¼Œå¯ä»¥åœ¨è¾“å…¥æ¡†å³ä¸‹è§’é€‰æ‹©å›¾ç‰‡è¿›è¡Œä¸Šä¼ ã€‚
</div>

</div>
        
      </div>

      <div class="copyrights">Â© 2009-2022 Aliyun.com ç‰ˆæƒæ‰€æœ‰</div>
    </div>
  </div>
  
  <!--
  MkDocs version      : 1.6.1
  Docs Build Date UTC : 2025-11-25 12:05:08.568103+00:00
  -->
</body>
</html>