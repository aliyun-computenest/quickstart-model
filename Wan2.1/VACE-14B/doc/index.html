<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="计算巢是阿里云开放给企业应用服务商的服务管理平台。服务商能够在计算巢上发布私有化部署服务，为其客户提供云上软件一键部署的能力；同时也支持全托管模式的服务，赋能服务商托管其客户资源。">
  <title>Index - Aliyun 计算巢 x Demo</title>

  <link rel="shortcut icon" href="../../../img/favicon.ico">

  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
  <link rel="stylesheet" href="../../../css/theme.css">
  

  

  
  

  
    <script src="../../../search/main.js"></script>
  

  

  <script src="../../../js/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <div class="container">
    <div class="nav">
      <div class="nav-inner">
        <div class="logo">
          <img src="./img/logo-2x.png">
        </div>
        <div class="nav-list">
          <ul>
          
              <li><a href="#_1">🌟 模型简介</a></li>
              
          
              <li><a href="#_2">✨ 核心特性</a></li>
              
          
              <li><a href="#_3">📊 技术规格</a></li>
              
          
              <li><a href="#_4">🎨 编辑能力</a></li>
              
          
              <li><a href="#_5">🚀 部署方式</a></li>
              
                  <li><a href="#_6">🏗️ 部署架构（推荐）</a></li>
                  
              
                  <li><a href="#q6_k">📦 Q6_K量化优势</a></li>
                  
              
          
              <li><a href="#_7">🎯 使用指南</a></li>
              
                  <li><a href="#comfyui">🌐 ComfyUI 使用</a></li>
                  
              
                  <li><a href="#api">🔌 API 调用</a></li>
                  
                      <li class="li-h3"><a href="#_8">🔑 获取认证信息</a></li>
                  
                      <li class="li-h3"><a href="#python">💻 Python 代码示例</a></li>
                  
              
          
              <li><a href="#_9">💡 最佳实践</a></li>
              
          
              <li><a href="#_10">🔧 常见问题与解决方案</a></li>
              
          
              <li><a href="#_11">📚 相关资源</a></li>
              
          
          </ul>
        </div>
      </div>
    </div>
    <div class="content theme-github">
      
      <div class="content-inner">        
        
        <div style="background: linear-gradient(135deg, #2563eb, #1e40af); padding: 24px; border-radius: 8px; color: white; text-align: center; margin-bottom: 24px;">
  <h1 style="font-size: 2.5em; margin: 0; font-weight: 600;">🎬 Wan2.1-VACE-14B-Q6_K 视频编辑完整指南</h1>
  <p style="font-size: 1.2em; margin: 16px 0 0 0; opacity: 0.9;">智能视频内容编辑技术，VACE (Video Adaptive Content Editing) 专业级视频编辑</p>
  <div style="margin-top: 20px;">
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">⚡ 14B参数</span>
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">🎯 Q6_K量化</span>
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">🚀 高效部署</span>
  </div>
</div>

<h2 id="_1">🌟 模型简介</h2>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

**Wan2.1-VACE-14B-Q6_K** 是一个专门用于视频内容编辑和处理的大规模量化模型。VACE（Video Adaptive Content Editing）技术专注于对现有视频进行智能编辑，包括风格转换、内容修改、场景增强等功能。该模型采用Q6_K量化技术，在保持14B参数强大性能的同时，显著降低了内存占用和计算资源需求，使其更适合在资源受限的环境中部署。

</div>

<h2 id="_2">✨ 核心特性</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="color: #1e40af; margin: 0 0 8px 0;">⚡ Q6_K量化优化</h4>
<p style="margin: 0; color: #1e40af;">14B参数，Q6_K量化，内存占用降低约40%</p>
</div>

<div style="background: #fef2f2; border-left: 4px solid #dc2626; padding: 16px; border-radius: 4px;">
<h4 style="color: #dc2626; margin: 0 0 8px 0;">🎥 视频编辑专用</h4>
<p style="margin: 0; color: #991b1b;">专门针对视频编辑任务优化，支持复杂编辑操作</p>
</div>

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 8px 0;">⏰ 时序一致性</h4>
<p style="margin: 0; color: #065f46;">保持视频帧间的连贯性和一致性</p>
</div>

<div style="background: #f5f3ff; border-left: 4px solid #7c3aed; padding: 16px; border-radius: 4px;">
<h4 style="color: #7c3aed; margin: 0 0 8px 0;">🛠️ 多种编辑功能</h4>
<p style="margin: 0; color: #5b21b6;">支持风格转换、内容修改、场景增强等</p>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">🚀 高效部署</h4>
<p style="margin: 0; color: #9a3412;">量化优化，更低的硬件要求，更快的推理速度</p>
</div>

<div style="background: #ecfdf5; border-left: 4px solid #10b981; padding: 16px; border-radius: 4px;">
<h4 style="color: #10b981; margin: 0 0 8px 0;">🌐 多语言支持</h4>
<p style="margin: 0; color: #047857;">支持中文和英文编辑指令</p>
</div>

</div>

<h2 id="_3">📊 技术规格</h2>
<div style="overflow-x: auto; margin: 16px 0;">
<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 6px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <thead style="background: #f8fafc;">
    <tr>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">规格项目</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">详细信息</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">模型类型</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">视频编辑（Video Editing）</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">参数规模</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">14B</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">量化方式</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Q6_K量化（GGUF格式）</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">模型文件</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">Wan2.1_14B_VACE-Q6_K.gguf</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">部署架构</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">ECS单机部署/ACS集群部署</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">内存需求</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">约8-12GB显存（相比原版降低40%）</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">支持分辨率</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">720P/1080P</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">输入格式</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">MP4、AVI、MOV等常见视频格式</td>
    </tr>
    <tr>
      <td style="padding: 12px; font-weight: 500;">输出格式</td>
      <td style="padding: 12px;">MP4（H.264编码）</td>
    </tr>
  </tbody>
</table>
</div>

<h2 id="_4">🎨 编辑能力</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin: 16px 0;">

<div style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #059669;">
<strong style="color: #059669;">🎭 风格转换</strong><br>
<small style="color: #065f46;">将视频转换为不同艺术风格</small>
</div>

<div style="background: #eff6ff; padding: 12px; border-radius: 6px; border-left: 3px solid #2563eb;">
<strong style="color: #2563eb;">🌈 色彩调整</strong><br>
<small style="color: #1e40af;">调整视频的色调、饱和度、亮度</small>
</div>

<div style="background: #fef2f2; padding: 12px; border-radius: 6px; border-left: 3px solid #dc2626;">
<strong style="color: #dc2626;">🏞️ 场景修改</strong><br>
<small style="color: #991b1b;">改变视频背景或添加新元素</small>
</div>

<div style="background: #f5f3ff; padding: 12px; border-radius: 6px; border-left: 3px solid #7c3aed;">
<strong style="color: #7c3aed;">🎯 对象编辑</strong><br>
<small style="color: #5b21b6;">修改或替换视频中的特定对象</small>
</div>

<div style="background: #fff7ed; padding: 12px; border-radius: 6px; border-left: 3px solid #ea580c;">
<strong style="color: #ea580c;">✨ 特效添加</strong><br>
<small style="color: #9a3412;">为视频添加各种视觉特效</small>
</div>

<div style="background: #ecfdf5; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981;">
<strong style="color: #10b981;">📈 质量增强</strong><br>
<small style="color: #047857;">提升视频清晰度和质量</small>
</div>

</div>

<hr />
<h1 id="_5">🚀 部署方式</h1>
<h2 id="_6">🏗️ 部署架构（推荐）</h2>
<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>💡 部署配置</strong><br>
  <strong>部署架构</strong>: ECS单机部署（推荐）或ACS集群部署<br>
  <strong>内存需求</strong>: 8-12GB显存，相比原版降低40%<br>
  <strong>扩展性</strong>: 支持单机和集群部署，量化版本更适合单机部署
</div>

<h2 id="q6_k">📦 Q6_K量化优势</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 8px 0;">💾 内存优化</h4>
<p style="margin: 0; color: #065f46;">显存占用降低约40%，更适合中等配置硬件</p>
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="color: #2563eb; margin: 0 0 8px 0;">⚡ 推理加速</h4>
<p style="margin: 0; color: #1e40af;">量化优化提升推理速度，减少等待时间</p>
</div>

<div style="background: #fef2f2; border-left: 4px solid #dc2626; padding: 16px; border-radius: 4px;">
<h4 style="color: #dc2626; margin: 0 0 8px 0;">🎯 质量保持</h4>
<p style="margin: 0; color: #991b1b;">Q6_K量化保持高质量输出，性能损失最小</p>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">💰 成本节约</h4>
<p style="margin: 0; color: #9a3412;">降低硬件要求，节约部署和运行成本</p>
</div>

</div>

<hr />
<h1 id="_7">🎯 使用指南</h1>
<h2 id="comfyui">🌐 ComfyUI 使用</h2>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

### 🔧 操作步骤

**1. 访问界面**
- 单击服务实例处的访问链接

<div style="text-align: center; margin: 16px 0;">
  <img src="img.png" alt="访问界面" style="max-width: 100%; border-radius: 6px; border: 1px solid #e2e8f0;">
</div>

**2. 加载工作流**
- 使用工作流 `vace14b.json`
- 将工作流导入到 ComfyUI 中

**3. 生成内容**
- 输入想要生成的视频或图片的提示词
- 点击生成开始处理

</div>

<h2 id="api">🔌 API 调用</h2>
<h3 id="_8">🔑 获取认证信息</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0;">

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">🎫 获取 Token</h4>
<p style="margin: 0 0 12px 0;">点击右上方按钮，打开底部面板，获取token</p>
<div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 6px;">
  <img src="img_1.png" alt="获取Token" style="max-width: 100%; border-radius: 6px; border: 1px solid #e2e8f0;">
</div>
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="color: #2563eb; margin: 0 0 8px 0;">🌐 获取服务器地址</h4>
<p style="margin: 0 0 12px 0;">COMFYUI_SERVER 的获取可参考</p>
<div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 6px;">
  <img src="img_2.png" alt="获取服务器地址" style="max-width: 100%; border-radius: 6px; border: 1px solid #e2e8f0;">
</div>
</div>

</div>

<h3 id="python">💻 Python 代码示例</h3>
<details style="border: 2px solid #2563eb; border-radius: 12px; padding: 20px; margin: 20px 0; background: linear-gradient(145deg, #f8fafc, #eff6ff); box-shadow: 0 8px 16px rgba(37, 99, 235, 0.15);">
<summary style="font-weight: bold; font-size: 18px; color: white; cursor: pointer; padding: 16px; background: linear-gradient(135deg, #2563eb, #1e40af); border-radius: 8px; margin: -20px -20px 20px -20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); transition: all 0.3s ease; display: flex; align-items: center; box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);">
📋 点击展开 API 调用 Python 代码
</summary>


<pre><code class="language-python">import requests, json, uuid, time, random, os

# 🔧 配置参数
COMFYUI_SERVER, COMFYUI_TOKEN = &quot;输入您的服务器地址&quot;, &quot;输入您的token&quot;
UNET_MODEL = &quot;Wan2.1_14B_VACE-Q6_K.gguf&quot;  # Q6_K量化版本
CLIP_MODEL = &quot;umt5_xxl_fp8_e4m3fn.safetensors&quot;
VAE_MODEL = &quot;wan21_vace_vae.safetensors&quot;

# 🎯 预设参数
IMAGE_PATH = &quot;example.png&quot;
PROMPT = &quot;女孩偷偷咬一口苹果&quot;
NEG_PROMPT = &quot;色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的&quot;

class VACEClient:
    def __init__(self, server=COMFYUI_SERVER, token=COMFYUI_TOKEN):
        self.base_url, self.token, self.client_id = f&quot;http://{server}&quot;, token, str(uuid.uuid4())
        self.headers = {&quot;Content-Type&quot;: &quot;application/json&quot;, **({&quot;Authorization&quot;: f&quot;Bearer {token}&quot;} if token else {})}

    def upload_image(self, image_path):
        &quot;&quot;&quot;📤 上传图片到ComfyUI&quot;&quot;&quot;
        if not os.path.exists(image_path):
            raise Exception(f&quot;图片文件不存在: {image_path}&quot;)

        try:
            with open(image_path, 'rb') as f:
                files = {'image': (os.path.basename(image_path), f, 'image/png')}
                headers = {}
                if self.token:
                    headers[&quot;Authorization&quot;] = f&quot;Bearer {self.token}&quot;

                response = requests.post(f&quot;{self.base_url}/upload/image&quot;, files=files, headers=headers)
                print(f&quot;Upload response: {response.text}&quot;)

                if response.status_code != 200:
                    raise Exception(f&quot;上传失败，状态码: {response.status_code}&quot;)

                result = response.json()
                if 'name' not in result:
                    raise Exception(f&quot;上传响应中没有文件名: {result}&quot;)

                return result['name']
        except Exception as e:
            raise Exception(f&quot;图片上传失败: {e}&quot;)

    def generate_vace(self, image_path, prompt, neg_prompt, steps=25, cfg=5, frames=49, width=720, height=720):
        &quot;&quot;&quot;🎬 VACE视频编辑 - Q6_K量化版本&quot;&quot;&quot;
        print(&quot;📤 正在上传图片...&quot;)
        image_name = self.upload_image(image_path)
        print(f&quot;✅ 图片上传成功: {image_name}&quot;)

        workflow = {
            &quot;11&quot;: {&quot;inputs&quot;: {&quot;unet_name&quot;: UNET_MODEL, &quot;weight_dtype&quot;: &quot;default&quot;}, &quot;class_type&quot;: &quot;UNETLoader&quot;},  # Q6_K量化版本
            &quot;13&quot;: {&quot;inputs&quot;: {&quot;clip_name&quot;: CLIP_MODEL, &quot;type&quot;: &quot;wan&quot;, &quot;device&quot;: &quot;default&quot;}, &quot;class_type&quot;: &quot;CLIPLoader&quot;},
            &quot;14&quot;: {&quot;inputs&quot;: {&quot;vae_name&quot;: VAE_MODEL}, &quot;class_type&quot;: &quot;VAELoader&quot;},
            &quot;15&quot;: {&quot;inputs&quot;: {&quot;text&quot;: prompt, &quot;clip&quot;: [&quot;13&quot;, 0]}, &quot;class_type&quot;: &quot;CLIPTextEncode&quot;},
            &quot;16&quot;: {&quot;inputs&quot;: {&quot;text&quot;: neg_prompt, &quot;clip&quot;: [&quot;13&quot;, 0]}, &quot;class_type&quot;: &quot;CLIPTextEncode&quot;},
            &quot;17&quot;: {&quot;inputs&quot;: {&quot;width&quot;: width, &quot;height&quot;: height, &quot;length&quot;: [&quot;21&quot;, 0], &quot;batch_size&quot;: 1, &quot;strength&quot;: 1.0, &quot;positive&quot;: [&quot;15&quot;, 0], &quot;negative&quot;: [&quot;16&quot;, 0], &quot;vae&quot;: [&quot;14&quot;, 0]}, &quot;class_type&quot;: &quot;WanVaceToVideo&quot;},
            &quot;18&quot;: {&quot;inputs&quot;: {&quot;image&quot;: image_name, &quot;upload&quot;: &quot;image&quot;}, &quot;class_type&quot;: &quot;LoadImage&quot;},
            &quot;21&quot;: {&quot;inputs&quot;: {&quot;value&quot;: frames}, &quot;class_type&quot;: &quot;INTConstant&quot;},
            &quot;22&quot;: {&quot;inputs&quot;: {&quot;width&quot;: width, &quot;height&quot;: height, &quot;upscale_method&quot;: &quot;nearest-exact&quot;, &quot;keep_proportion&quot;: &quot;crop&quot;, &quot;pad_color&quot;: &quot;0, 0, 0&quot;, &quot;crop_position&quot;: &quot;center&quot;, &quot;divisible_by&quot;: 2, &quot;device&quot;: &quot;gpu&quot;, &quot;image&quot;: [&quot;18&quot;, 0]}, &quot;class_type&quot;: &quot;ImageResizeKJv2&quot;},
            &quot;23&quot;: {&quot;inputs&quot;: {&quot;images&quot;: [&quot;22&quot;, 0]}, &quot;class_type&quot;: &quot;PreviewImage&quot;},
            &quot;24&quot;: {&quot;inputs&quot;: {&quot;seed&quot;: random.randint(1, 1000000000000000), &quot;steps&quot;: steps, &quot;cfg&quot;: cfg, &quot;sampler_name&quot;: &quot;uni_pc&quot;, &quot;scheduler&quot;: &quot;simple&quot;, &quot;denoise&quot;: 1, &quot;model&quot;: [&quot;27&quot;, 0], &quot;positive&quot;: [&quot;17&quot;, 0], &quot;negative&quot;: [&quot;17&quot;, 1], &quot;latent_image&quot;: [&quot;17&quot;, 2]}, &quot;class_type&quot;: &quot;KSampler&quot;},
            &quot;27&quot;: {&quot;inputs&quot;: {&quot;shift&quot;: 8.0, &quot;model&quot;: [&quot;11&quot;, 0]}, &quot;class_type&quot;: &quot;ModelSamplingSD3&quot;},
            &quot;30&quot;: {&quot;inputs&quot;: {&quot;trim_amount&quot;: [&quot;17&quot;, 3], &quot;samples&quot;: [&quot;24&quot;, 0]}, &quot;class_type&quot;: &quot;TrimVideoLatent&quot;},
            &quot;31&quot;: {&quot;inputs&quot;: {&quot;samples&quot;: [&quot;30&quot;, 0], &quot;vae&quot;: [&quot;14&quot;, 0]}, &quot;class_type&quot;: &quot;VAEDecode&quot;},
            &quot;32&quot;: {&quot;inputs&quot;: {&quot;frame_rate&quot;: 16, &quot;loop_count&quot;: 0, &quot;filename_prefix&quot;: &quot;VACE_Q6K_video&quot;, &quot;format&quot;: &quot;video/h264-mp4&quot;, &quot;pix_fmt&quot;: &quot;yuv420p&quot;, &quot;crf&quot;: 19, &quot;save_metadata&quot;: True, &quot;trim_to_audio&quot;: False, &quot;pingpong&quot;: False, &quot;save_output&quot;: True, &quot;images&quot;: [&quot;31&quot;, 0]}, &quot;class_type&quot;: &quot;VHS_VideoCombine&quot;}
        }

        print(&quot;📤 提交VACE Q6_K工作流...&quot;)
        response = requests.post(f&quot;{self.base_url}/prompt&quot;, headers=self.headers, json={&quot;prompt&quot;: workflow, &quot;client_id&quot;: self.client_id})
        print(f&quot;API Response: {response.text}&quot;)
        result = response.json()
        if &quot;error&quot; in result: 
            raise Exception(f&quot;Workflow error: {result['error']}&quot;)
        if &quot;prompt_id&quot; not in result: 
            raise Exception(f&quot;No prompt_id in response: {result}&quot;)
        return result[&quot;prompt_id&quot;]

    def get_status(self, task_id):
        &quot;&quot;&quot;📊 获取任务状态&quot;&quot;&quot;
        try:
            queue_data = requests.get(f&quot;{self.base_url}/queue&quot;, headers=self.headers).json()
            if any(item[1] == task_id for item in queue_data.get(&quot;queue_running&quot;, [])): 
                return &quot;processing&quot;
            if any(item[1] == task_id for item in queue_data.get(&quot;queue_pending&quot;, [])): 
                return &quot;pending&quot;
            history_response = requests.get(f&quot;{self.base_url}/history/{task_id}&quot;, headers=self.headers)
            return &quot;completed&quot; if history_response.status_code == 200 and task_id in history_response.json() else &quot;processing&quot;
        except: 
            return &quot;processing&quot;

    def download_video(self, task_id, output_path=&quot;vace_q6k_output.mp4&quot;):
        &quot;&quot;&quot;📥 下载生成的视频&quot;&quot;&quot;
        try:
            response = requests.get(f&quot;{self.base_url}/history/{task_id}&quot;, headers=self.headers)
            history = response.json()
            if task_id in history:
                for output in history[task_id]['outputs'].values():
                    if 'gifs' in output:
                        filename = output['gifs'][0]['filename']
                        video_response = requests.get(f&quot;{self.base_url}/view?filename={filename}&quot;, headers=self.headers)
                        with open(output_path, &quot;wb&quot;) as f: 
                            f.write(video_response.content)
                        return output_path
        except Exception as e: 
            print(f&quot;Download error: {e}&quot;)
        return None

def main():
    &quot;&quot;&quot;🚀 主函数 - 执行VACE Q6_K视频编辑任务&quot;&quot;&quot;
    client = VACEClient()
    try:
        print(f&quot;🎬 开始VACE Q6_K视频编辑任务...&quot;)
        print(f&quot;📷 输入图片: {IMAGE_PATH}&quot;)
        print(f&quot;📝 编辑提示: {PROMPT}&quot;)
        print(f&quot;🔧 使用模型: {UNET_MODEL}&quot;)

        if not os.path.exists(IMAGE_PATH):
            print(f&quot;❌ 图片文件不存在: {IMAGE_PATH}&quot;)
            print(&quot;请确保当前目录下有 example.png 文件&quot;)
            return

        task_id = client.generate_vace(IMAGE_PATH, PROMPT, NEG_PROMPT, 25, 5, 49, 720, 720)
        print(f&quot;🆔 Task ID: {task_id}&quot;)

        while True:
            status = client.get_status(task_id)
            print(f&quot;📊 Current status: {status}&quot;)
            if status == &quot;completed&quot;: 
                print(&quot;✅ Video ready!&quot;); 
                break
            elif status == &quot;failed&quot;: 
                print(&quot;❌ Generation failed!&quot;); 
                exit(1)
            time.sleep(10)

        output_file = client.download_video(task_id, &quot;vace_q6k_output.mp4&quot;)
        print(&quot;🎉 Video downloaded successfully!&quot; if output_file else &quot;❌ Failed to download video&quot;)
        if output_file: 
            print(f&quot;📁 Saved as: {output_file}&quot;)

    except Exception as e: 
        print(f&quot;❌ Error: {e}&quot;)

if __name__ == &quot;__main__&quot;: 
    main()
</code></pre>


</details>

<hr />
<h1 id="_9">💡 最佳实践</h1>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 8px 0;">🎯 提示词优化</h4>
<ul style="margin: 0; padding-left: 20px; color: #065f46;">
  <li>使用清晰具体的描述</li>
  <li>包含风格和情绪关键词</li>
  <li>指定时序元素以保持一致性</li>
  <li>Q6_K量化版本保持强大理解能力</li>
</ul>
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="color: #2563eb; margin: 0 0 8px 0;">⚙️ 参数调优</h4>
<ul style="margin: 0; padding-left: 20px; color: #1e40af;">
  <li>从默认设置开始（25步，CFG 5）</li>
  <li>支持更高分辨率（720P/1080P）</li>
  <li>量化版本推理更快，可适当增加步数</li>
  <li>监控显存使用，Q6_K版本更节省</li>
</ul>
</div>

<div style="background: #fef2f2; border-left: 4px solid #dc2626; padding: 16px; border-radius: 4px;">
<h4 style="color: #dc2626; margin: 0 0 8px 0;">🎬 视频质量</h4>
<ul style="margin: 0; padding-left: 20px; color: #991b1b;">
  <li>使用高质量输入图片</li>
  <li>确保正确的宽高比</li>
  <li>先用短片段测试</li>
  <li>Q6_K量化保持高质量输出</li>
</ul>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">💾 量化优势</h4>
<ul style="margin: 0; padding-left: 20px; color: #9a3412;">
  <li>显存占用降低约40%</li>
  <li>推理速度提升</li>
  <li>适合中等配置硬件</li>
  <li>成本效益更高</li>
</ul>
</div>

</div>

<hr />
<h1 id="_10">🔧 常见问题与解决方案</h1>
<details style="border: 2px solid #dc2626; border-radius: 12px; padding: 20px; margin: 15px 0; background: linear-gradient(145deg, #fef2f2, #fee2e2); box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
<summary style="font-weight: bold; font-size: 16px; color: #dc2626; cursor: pointer;">🎨 生成质量问题</summary>
<div style="margin-top: 15px; color: #991b1b;">
<p><strong>解决方案：</strong></p>
<ul>
<li><strong>提示词不够详细</strong>：增加更具体的描述，Q6_K版本保持强大理解能力</li>
<li><strong>参数设置不当</strong>：调整步数和CFG值，推荐25步，CFG 5</li>
<li><strong>输入图片质量低</strong>：使用更高质量的源图片</li>
<li><strong>量化影响</strong>：Q6_K量化对质量影响很小，如有问题可尝试调整参数</li>
</ul>
</div>
</details>

<details style="border: 2px solid #ea580c; border-radius: 12px; padding: 20px; margin: 15px 0; background: linear-gradient(145deg, #fff7ed, #fed7aa); box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
<summary style="font-weight: bold; font-size: 16px; color: #ea580c; cursor: pointer;">⚡ 性能问题</summary>
<div style="margin-top: 15px; color: #9a3412;">
<p><strong>优化建议：</strong></p>
<ul>
<li><strong>显存不足</strong>：Q6_K版本显存需求降低40%，8-12GB即可</li>
<li><strong>加载缓慢</strong>：GGUF格式加载更快，但仍需耐心等待</li>
<li><strong>推理速度</strong>：量化版本推理更快，可适当增加步数提升质量</li>
<li><strong>硬件配置</strong>：Q6_K版本对硬件要求更低，适合中等配置</li>
</ul>
</div>
</details>

<details style="border: 2px solid #059669; border-radius: 12px; padding: 20px; margin: 15px 0; background: linear-gradient(145deg, #f0fdf4, #dcfce7); box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
<summary style="font-weight: bold; font-size: 16px; color: #059669; cursor: pointer;">🔧 兼容性问题</summary>
<div style="margin-top: 15px; color: #065f46;">
<p><strong>注意事项：</strong></p>
<ul>
<li><strong>GGUF格式支持</strong>：确保ComfyUI支持GGUF格式模型</li>
<li><strong>插件兼容性</strong>：某些插件可能与量化版本不兼容</li>
<li><strong>参数范围</strong>：注意Q6_K版本的推荐参数范围</li>
<li><strong>模型路径</strong>：确保正确指定GGUF文件路径</li>
</ul>
</div>
</details>

<hr />
<h1 id="_11">📚 相关资源</h1>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h4 style="margin-top: 0; color: #1e40af;">📄 技术文档</h4>
<a href="https://arxiv.org/pdf/2503.07598" style="color: #2563eb; text-decoration: none; font-weight: 500;">VACE技术论文 →</a>
<p style="margin-top: 8px; color: #64748b; font-size: 14px;">了解 VACE 技术的理论基础和实现原理</p>
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h4 style="margin-top: 0; color: #1e40af;">🛠️ 工具与指南</h4>
<a href="https://docs.comfy.org/zh-CN/tutorials/video/wan/vace" style="color: #2563eb; text-decoration: none; font-weight: 500;">ComfyUI视频编辑指南 →</a>
<p style="margin-top: 8px; color: #64748b; font-size: 14px;">ComfyUI 视频编辑功能的详细使用说明</p>
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h4 style="margin-top: 0; color: #1e40af;">🎥 最佳实践</h4>
<a href="https://ali-vilab.github.io/VACE-Page/" style="color: #2563eb; text-decoration: none; font-weight: 500;">视频编辑最佳实践 →</a>
<p style="margin-top: 8px; color: #64748b; font-size: 14px;">专业视频编辑的技巧和经验分享</p>
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h4 style="margin-top: 0; color: #1e40af;">🔌 插件文档</h4>
<a href="https://github.com/kijai/ComfyUI-WanVideoWrapper" style="color: #2563eb; text-decoration: none; font-weight: 500;">VACE插件文档 →</a>
<p style="margin-top: 8px; color: #64748b; font-size: 14px;">VACE ComfyUI 插件的安装和使用说明</p>
</div>

</div>

<hr />
<div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 6px; margin-top: 24px;">
  <p style="margin: 0; color: #64748b; font-size: 14px;">
    🎬 <strong>开始使用 VACE-14B-Q6_K 量化版本创作精彩视频吧！</strong> | 智能视频编辑，高效节能，让创意无限延伸
  </p>
</div>
        
      </div>

      <div class="copyrights">© 2009-2022 Aliyun.com 版权所有</div>
    </div>
  </div>
  
  <!--
  MkDocs version      : 1.6.1
  Docs Build Date UTC : 2025-09-17 10:39:36.198136+00:00
  -->
</body>
</html>