<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="è®¡ç®—å·¢æ˜¯é˜¿é‡Œäº‘å¼€æ”¾ç»™ä¼ä¸šåº”ç”¨æœåŠ¡å•†çš„æœåŠ¡ç®¡ç†å¹³å°ã€‚æœåŠ¡å•†èƒ½å¤Ÿåœ¨è®¡ç®—å·¢ä¸Šå‘å¸ƒç§æœ‰åŒ–éƒ¨ç½²æœåŠ¡ï¼Œä¸ºå…¶å®¢æˆ·æä¾›äº‘ä¸Šè½¯ä»¶ä¸€é”®éƒ¨ç½²çš„èƒ½åŠ›ï¼›åŒæ—¶ä¹Ÿæ”¯æŒå…¨æ‰˜ç®¡æ¨¡å¼çš„æœåŠ¡ï¼Œèµ‹èƒ½æœåŠ¡å•†æ‰˜ç®¡å…¶å®¢æˆ·èµ„æºã€‚">
  <title>Index - Aliyun è®¡ç®—å·¢ x Demo</title>

  <link rel="shortcut icon" href="../../../img/favicon.ico">

  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
  <link rel="stylesheet" href="../../../css/theme.css">
  

  

  
  

  
    <script src="../../../search/main.js"></script>
  

  

  <script src="../../../js/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <div class="container">
    <div class="nav">
      <div class="nav-inner">
        <div class="logo">
          <img src="./img/logo-2x.png">
        </div>
        <div class="nav-list">
          <ul>
          
              <li><a href="#_1">ğŸ“‹ æ¨¡å‹æ¦‚è§ˆ</a></li>
              
          
              <li><a href="#wan22-fun-control">ğŸš€ Wan2.2 Fun Control å·¥ä½œæµç¤ºä¾‹</a></li>
              
                  <li><a href="#_2">ğŸ“¥ æ­¥éª¤ä¸€ï¼šå·¥ä½œæµåŠç´ æä¸‹è½½</a></li>
                  
              
                  <li><a href="#_3">ğŸ”— æ­¥éª¤äºŒï¼šæ¨¡å‹æ–‡ä»¶</a></li>
                  
                      <li class="li-h3"><a href="#_4">ğŸ“‚ æ¨¡å‹æ–‡ä»¶ç»“æ„</a></li>
                  
              
                  <li><a href="#_5">ğŸ”§ æ­¥éª¤ä¸‰ï¼šå·¥ä½œæµé…ç½®æ“ä½œ</a></li>
                  
              
          
              <li><a href="#api">APIè°ƒç”¨</a></li>
              
          
              <li><a href="#_6">ğŸ¯ æ§åˆ¶ç±»å‹è¯¦è§£</a></li>
              
          
              <li><a href="#_7">ğŸ’¡ è¡¥å……è¯´æ˜ä¸æ‰©å±•</a></li>
              
          
              <li><a href="#_8">ğŸ¯ åº”ç”¨åœºæ™¯</a></li>
              
          
              <li><a href="#_9">ğŸ’¡ ä½¿ç”¨æŠ€å·§ä¸å»ºè®®</a></li>
              
          
              <li><a href="#_10">ğŸ”§ æŠ€æœ¯è§„æ ¼</a></li>
              
          
          </ul>
        </div>
      </div>
    </div>
    <div class="content theme-github">
      
      <div class="content-inner">        
        
        <div style="background: linear-gradient(135deg, #2563eb, #1e40af); padding: 24px; border-radius: 8px; color: white; text-align: center; margin-bottom: 24px;">
  <h1 style="font-size: 2.5em; margin: 0; font-weight: 600;">ğŸ® Wan2.2-Fun-Control è§†é¢‘æ§åˆ¶ç”Ÿæˆ</h1>
  <p style="font-size: 1.2em; margin: 16px 0 0 0; opacity: 0.9;">ComfyUI åŸç”Ÿå·¥ä½œæµ - å¤šæ¨¡æ€æ§åˆ¶æ¡ä»¶çš„ç²¾å‡†è§†é¢‘ç”Ÿæˆ</p>
  <div style="margin-top: 20px;">
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">ğŸ¯ å¤šæ¨¡æ€æ§åˆ¶</span>
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">ğŸ¬ å½±è§†çº§è´¨é‡</span>
    <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 12px; border-radius: 12px; font-size: 14px; margin: 0 8px;">ğŸŒ å¤šè¯­è¨€æ”¯æŒ</span>
  </div>
</div>

<h2 id="_1">ğŸ“‹ æ¨¡å‹æ¦‚è§ˆ</h2>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

**Wan2.2-Fun-Control** æ˜¯ Alibaba PAI å›¢é˜Ÿæ¨å‡ºçš„æ–°ä¸€ä»£è§†é¢‘ç”Ÿæˆä¸æ§åˆ¶æ¨¡å‹ï¼Œé€šè¿‡å¼•å…¥åˆ›æ–°æ€§çš„æ§åˆ¶ä»£ç ï¼ˆControl Codesï¼‰æœºåˆ¶ï¼Œç»“åˆæ·±åº¦å­¦ä¹ å’Œå¤šæ¨¡æ€æ¡ä»¶è¾“å…¥ï¼Œèƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡ä¸”ç¬¦åˆé¢„è®¾æ§åˆ¶æ¡ä»¶çš„è§†é¢‘ã€‚è¯¥æ¨¡å‹é‡‡ç”¨ **Apache 2.0 è®¸å¯åè®®**å‘å¸ƒï¼Œæ”¯æŒå•†ä¸šä½¿ç”¨ã€‚

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin: 16px 0;">
  <div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
    <strong>ğŸ¯ å¤šæ¨¡æ€æ§åˆ¶</strong><br>
    <p style="margin: 8px 0 0 0; color: #1e40af; font-size: 14px;">æ”¯æŒ Cannyã€Depthã€OpenPoseã€MLSD ç­‰å¤šç§æ§åˆ¶æ¡ä»¶</p>
  </div>

  <div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
    <strong>ğŸ¬ é«˜è´¨é‡è§†é¢‘ç”Ÿæˆ</strong><br>
    <p style="margin: 8px 0 0 0; color: #065f46; font-size: 14px;">åŸºäº Wan2.2 æ¶æ„ï¼Œè¾“å‡ºå½±è§†çº§è´¨é‡è§†é¢‘</p>
  </div>

  <div style="background: #fef3c7; border-left: 4px solid #d97706; padding: 16px; border-radius: 4px;">
    <strong>ğŸŒ å¤šè¯­è¨€æ”¯æŒ</strong><br>
    <p style="margin: 8px 0 0 0; color: #9a3412; font-size: 14px;">æ”¯æŒä¸­è‹±æ–‡ç­‰å¤šè¯­è¨€æç¤ºè¯è¾“å…¥</p>
  </div>

  <div style="background: #f3e8ff; border-left: 4px solid #7c3aed; padding: 16px; border-radius: 4px;">
    <strong>ğŸ® è½¨è¿¹æ§åˆ¶</strong><br>
    <p style="margin: 8px 0 0 0; color: #5b21b6; font-size: 14px;">æ”¯æŒç²¾ç¡®çš„è¿åŠ¨è½¨è¿¹æ§åˆ¶åŠŸèƒ½</p>
  </div>
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ”— ç›¸å…³èµ„æº</strong><br>
  â€¢ <strong>æ¨¡å‹ä»“åº“</strong>ï¼š<a href="https://huggingface.co/alibaba-pai/Wan2.2-Fun-A14B-Control" target="_blank" style="color: #2563eb;">ğŸ¤— Wan2.2-Fun-A14B-Control</a><br>
  â€¢ <strong>ä»£ç ä»“åº“</strong>ï¼š<a href="https://github.com/aigc-apps/VideoX-Fun" target="_blank" style="color: #2563eb;">VideoX-Fun</a>
</div>

</div>

<h2 id="wan22-fun-control">ğŸš€ Wan2.2 Fun Control å·¥ä½œæµç¤ºä¾‹</h2>
<h3 id="_2">ğŸ“¥ æ­¥éª¤ä¸€ï¼šå·¥ä½œæµåŠç´ æä¸‹è½½</h3>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">
ç›´æ¥é€šè¿‡Comfyuiæ¨¡ç‰ˆä»“åº“æ‰“å¼€

![img.png](img.png)


ä¸‹è½½ä»¥ä¸‹è§†é¢‘æˆ– æˆ–JSON æ–‡ä»¶å¹¶æ‹–å…¥ ComfyUI ä¸­ä»¥åŠ è½½å¯¹åº”çš„å·¥ä½œæµã€‚

<div style="text-align: center; margin: 20px 0;">
  <video controls style="width: 100%; max-width: 800px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" src="https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/video/wan/wan2.2_fun_control/wan2.2_14B_fun_inp.mp4"></video>
</div>

<div style="text-align: center; margin: 20px 0;">
  <a href="https://raw.githubusercontent.com/Comfy-Org/workflow_templates/refs/heads/main/templates/video_wan2_2_14B_fun_control.json" target="_blank" style="display: inline-block; background: linear-gradient(135deg, #2563eb, #1e40af); color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: bold; box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);">
    ğŸ“„ ä¸‹è½½ JSON æ ¼å¼å·¥ä½œæµ
  </a>
</div>

### ğŸ“ ç¤ºä¾‹ç´ æä¸‹è½½

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0;">

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 12px 0;">ğŸ–¼ï¸ è¾“å…¥èµ·å§‹å›¾ç‰‡</h4>
<div style="text-align: center; margin: 12px 0;">
  <img src="https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/video/wan/wan2.2_fun_control/input.jpg" alt="è¾“å…¥èµ·å§‹å›¾ç‰‡" style="max-width: 100%; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
</div>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 12px 0;">ğŸ¬ æ§åˆ¶è§†é¢‘</h4>
<div style="text-align: center; margin: 12px 0;">
  <video controls style="width: 100%; max-width: 300px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" src="https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/video/wan/wan2.2_fun_control/control_video.mp4"></video>
</div>
<p style="margin: 8px 0 0 0; color: #9a3412; font-size: 13px;">æ­¤è§†é¢‘å·²ç»è¿‡é¢„å¤„ç†ï¼Œå¯ç›´æ¥ç”¨äºæ§åˆ¶è§†é¢‘ç”Ÿæˆ</p>
</div>

</div>

</div>

<h3 id="_3">ğŸ”— æ­¥éª¤äºŒï¼šæ¨¡å‹æ–‡ä»¶</h3>
<h4 id="_4">ğŸ“‚ æ¨¡å‹æ–‡ä»¶ç»“æ„</h4>
<div style="background: #1e293b; border-radius: 6px; padding: 16px; margin: 16px 0;">
<pre style="margin: 0; color: #e2e8f0; font-family: 'Courier New', monospace; font-size: 14px;"><code>ComfyUI/
â”œâ”€â”€â”€ğŸ“‚ models/
â”‚   â”œâ”€â”€â”€ğŸ“‚ diffusion_models/
â”‚   â”‚   â”œâ”€â”€â”€ wan2.2_fun_control_low_noise_14B_fp8_scaled.safetensors
â”‚   â”‚   â””â”€â”€â”€ wan2.2_fun_control_high_noise_14B_fp8_scaled.safetensors
â”‚   â”œâ”€â”€â”€ğŸ“‚ loras/
â”‚   â”‚   â”œâ”€â”€â”€ wan2.2_i2v_lightx2v_4steps_lora_v1_high_noise.safetensors
â”‚   â”‚   â””â”€â”€â”€ wan2.2_i2v_lightx2v_4steps_lora_v1_low_noise.safetensors
â”‚   â”œâ”€â”€â”€ğŸ“‚ text_encoders/
â”‚   â”‚   â””â”€â”€â”€ umt5_xxl_fp8_e4m3fn_scaled.safetensors 
â”‚   â””â”€â”€â”€ğŸ“‚ vae/
â”‚       â””â”€â”€ wan_2.1_vae.safetensors</code></pre>
</div>

<h3 id="_5">ğŸ”§ æ­¥éª¤ä¸‰ï¼šå·¥ä½œæµé…ç½®æ“ä½œ</h3>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

<div style="text-align: center; margin: 20px 0;">
  <img src="https://mintcdn.com/dripart/SIDaLac8vBogzwm7/images/tutorial/video/wan/wan2_2/wan_2.2_14b_fun_control.jpg?fit=max&auto=format&n=SIDaLac8vBogzwm7&q=85&s=1c5d26bea52f7f790ac6059e7a195c8d" alt="Wan2.2 Fun Control å·¥ä½œæµæ­¥éª¤" style="width: 100%; max-width: 1200px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
</div>

<div style="background: #fef3c7; border-left: 4px solid #d97706; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>âš ï¸ é‡è¦æé†’</strong><br>
  æ­¤å·¥ä½œæµä½¿ç”¨äº† LoRA åŠ é€Ÿç‰ˆæœ¬ï¼Œè¯·ç¡®ä¿å¯¹åº”çš„ Diffusion Model å’Œ LoRA æ–‡ä»¶ä¿æŒä¸€è‡´ï¼Œhigh noise å’Œ low noise çš„æ¨¡å‹å’Œ LoRA éœ€è¦å¯¹åº”ä½¿ç”¨ã€‚
</div>

#### ğŸ“‹ è¯¦ç»†é…ç½®æ­¥éª¤

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="color: #2563eb; margin: 0 0 12px 0;">ğŸ”§ High Noise æ¨¡å‹é…ç½®</h4>
<ul style="margin: 0; padding-left: 20px; color: #1e40af; font-size: 14px;">
  <li><strong>Load Diffusion Model</strong>ï¼š<br><code>wan2.2_fun_control_high_noise_14B_fp8_scaled.safetensors</code></li>
  <li><strong>LoraLoaderModelOnly</strong>ï¼š<br><code>wan2.2_i2v_lightx2v_4steps_lora_v1_high_noise.safetensors</code></li>
</ul>
</div>

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 12px 0;">ğŸ”§ Low Noise æ¨¡å‹é…ç½®</h4>
<ul style="margin: 0; padding-left: 20px; color: #065f46; font-size: 14px;">
  <li><strong>Load Diffusion Model</strong>ï¼š<br><code>wan2.2_fun_control_low_noise_14B_fp8_scaled.safetensors</code></li>
  <li><strong>LoraLoaderModelOnly</strong>ï¼š<br><code>wan2.2_i2v_lightx2v_4steps_lora_v1_low_noise.safetensors</code></li>
</ul>
</div>

</div>

#### ğŸ¯ åŸºç¡€æ¨¡å‹é…ç½®

<div style="overflow-x: auto; margin: 16px 0;">
<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 6px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <thead style="background: #f8fafc;">
    <tr>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">èŠ‚ç‚¹åç§°</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">æ¨¡å‹æ–‡ä»¶</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">Load CLIP</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-family: monospace; font-size: 12px;">umt5_xxl_fp8_e4m3fn_scaled.safetensors</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">æ–‡æœ¬ç¼–ç å™¨</td>
    </tr>
    <tr>
      <td style="padding: 12px; font-weight: 500;">Load VAE</td>
      <td style="padding: 12px; font-family: monospace; font-size: 12px;">wan_2.1_vae.safetensors</td>
      <td style="padding: 12px;">å˜åˆ†è‡ªç¼–ç å™¨</td>
    </tr>
  </tbody>
</table>
</div>

#### ğŸ“ è¾“å…¥é…ç½®æ­¥éª¤

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 8px 0;">ğŸ–¼ï¸ èµ·å§‹å¸§ä¸Šä¼ </h4>
<p style="margin: 0; color: #065f46; font-size: 14px;">åœ¨ <strong>Load Image</strong> èŠ‚ç‚¹ä¸Šä¼ èµ·å§‹å¸§å›¾ç‰‡</p>
</div>

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px;">
<h4 style="color: #2563eb; margin: 0 0 8px 0;">ğŸ¬ æ§åˆ¶è§†é¢‘ä¸Šä¼ </h4>
<p style="margin: 0; color: #1e40af; font-size: 14px;">åœ¨ç¬¬äºŒä¸ª <strong>Load Video</strong> èŠ‚ç‚¹ä¸Šä¼ æ§åˆ¶è§†é¢‘çš„ pose è§†é¢‘</p>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px;">
<h4 style="color: #ea580c; margin: 0 0 8px 0;">ğŸ”§ é¢„å¤„ç†èŠ‚ç‚¹ç¦ç”¨</h4>
<p style="margin: 0; color: #9a3412; font-size: 14px;">ç”±äºæä¾›çš„è§†é¢‘å·²é¢„å¤„ç†ï¼Œéœ€è¦ç¦ç”¨å¯¹åº”çš„é¢„å¤„ç†èŠ‚ç‚¹ï¼ˆé€‰ä¸­åä½¿ç”¨ <strong>Ctrl+B</strong>ï¼‰</p>
</div>

<div style="background: #f3e8ff; border-left: 4px solid #7c3aed; padding: 16px; border-radius: 4px;">
<h4 style="color: #7c3aed; margin: 0 0 8px 0;">ğŸ“ æç¤ºè¯ä¿®æ”¹</h4>
<p style="margin: 0; color: #5b21b6; font-size: 14px;">ä¿®æ”¹ Promptï¼Œæ”¯æŒä¸­è‹±æ–‡è¾“å…¥</p>
</div>

</div>

#### âš™ï¸ å‚æ•°è°ƒæ•´

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ¬ Wan22FunControlToVideo èŠ‚ç‚¹é…ç½®</strong><br>
  â€¢ ä¿®æ”¹å¯¹åº”è§†é¢‘çš„å°ºå¯¸å‚æ•°<br>
  â€¢ é»˜è®¤è®¾ç½®äº† 640Ã—640 çš„åˆ†è¾¨ç‡ï¼Œé¿å…ä½æ˜¾å­˜ç”¨æˆ·ä½¿ç”¨æ—¶è¿‡äºè€—æ—¶<br>
  â€¢ å¯æ ¹æ®éœ€è¦è°ƒæ•´ä¸ºæ›´é«˜åˆ†è¾¨ç‡
</div>

#### ğŸš€ æ‰§è¡Œç”Ÿæˆ

<div style="text-align: center; margin: 20px 0;">
  <div style="background: linear-gradient(135deg, #059669, #047857); color: white; padding: 16px 32px; border-radius: 8px; display: inline-block; box-shadow: 0 4px 8px rgba(5, 150, 105, 0.3);">
    <strong>âŒ¨ï¸ ç‚¹å‡» Run æŒ‰é’®æˆ–ä½¿ç”¨å¿«æ·é”® Ctrl(Cmd) + Enter æ‰§è¡Œè§†é¢‘ç”Ÿæˆ</strong>
  </div>
</div>

</div>

<h2 id="api">APIè°ƒç”¨</h2>
<details style="border: 2px solid #2563eb; border-radius: 12px; padding: 20px; margin: 20px 0; background: linear-gradient(145deg, #f8fafc, #eff6ff); box-shadow: 0 8px 16px rgba(37, 99, 235, 0.15);">
<summary style="font-weight: bold; font-size: 18px; color: white; cursor: pointer; padding: 16px; background: linear-gradient(135deg, #2563eb, #1e40af); border-radius: 8px; margin: -20px -20px 20px -20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); transition: all 0.3s ease; display: flex; align-items: center; box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);">
ğŸ“‹ ç‚¹å‡»å±•å¼€ComfyUI APIè°ƒç”¨Pythonä»£ç 
</summary>


<pre><code class="language-python">
import requests
import json
import uuid
import time
import random
import os

# Configuration Parameters - Wan2.2 Fun Control Specific
COMFYUI_SERVER = &quot;127.0.0.1:8188&quot;  # Local server
COMFYUI_TOKEN = &quot;&quot;  # Usually no token needed for local

# Model Configuration
HIGH_NOISE_UNET = &quot;wan2.2_fun_control_high_noise_14B_fp8_scaled.safetensors&quot;
LOW_NOISE_UNET = &quot;wan2.2_fun_control_low_noise_14B_fp8_scaled.safetensors&quot;
CLIP_MODEL = &quot;umt5_xxl_fp8_e4m3fn_scaled.safetensors&quot;
VAE_MODEL = &quot;wan_2.1_vae.safetensors&quot;
HIGH_NOISE_LORA = &quot;wan2.2_i2v_lightx2v_4steps_lora_v1_high_noise.safetensors&quot;
LOW_NOISE_LORA = &quot;wan2.2_i2v_lightx2v_4steps_lora_v1_low_noise.safetensors&quot;

# Default Parameters
DEFAULT_POSITIVE_PROMPT = &quot;On a sunny summer day, there are marshmallow - like clouds, and the sunlight is bright and warm. A girl with white curly double - ponytails is wearing unique sunglasses, distinctive clothes and shoes. Her posture is natural and full of dynamic tension. The background is the scene of the Leaning Tower of Pisa in Italy, emphasizing the realistic contrast of details in reality. The whole picture is in a realistic 3D style, rich in details and with a relaxed atmosphere. She is dancing slowly, waving her hands.&quot;

DEFAULT_NEGATIVE_PROMPT = &quot;è‰²è°ƒè‰³ä¸½ï¼Œè¿‡æ›ï¼Œé™æ€ï¼Œç»†èŠ‚æ¨¡ç³Šä¸æ¸…ï¼Œå­—å¹•ï¼Œé£æ ¼ï¼Œä½œå“ï¼Œç”»ä½œï¼Œç”»é¢ï¼Œé™æ­¢ï¼Œæ•´ä½“å‘ç°ï¼Œæœ€å·®è´¨é‡ï¼Œä½è´¨é‡ï¼ŒJPEGå‹ç¼©æ®‹ç•™ï¼Œä¸‘é™‹çš„ï¼Œæ®‹ç¼ºçš„ï¼Œå¤šä½™çš„æ‰‹æŒ‡ï¼Œç”»å¾—ä¸å¥½çš„æ‰‹éƒ¨ï¼Œç”»å¾—ä¸å¥½çš„è„¸éƒ¨ï¼Œç•¸å½¢çš„ï¼Œæ¯å®¹çš„ï¼Œå½¢æ€ç•¸å½¢çš„è‚¢ä½“ï¼Œæ‰‹æŒ‡èåˆï¼Œé™æ­¢ä¸åŠ¨çš„ç”»é¢ï¼Œæ‚ä¹±çš„èƒŒæ™¯ï¼Œä¸‰æ¡è…¿ï¼ŒèƒŒæ™¯äººå¾ˆå¤šï¼Œå€’ç€èµ°&quot;

DEFAULT_REF_IMAGE = &quot;fun_control.jpg&quot;
DEFAULT_CONTROL_VIDEO = &quot;control_video.mp4&quot;

class ComfyUIWan22FunControlClient:
    def __init__(self, server=COMFYUI_SERVER, token=COMFYUI_TOKEN):
        self.base_url = f&quot;http://{server}&quot;
        self.token = token
        self.client_id = str(uuid.uuid4())
        self.headers = {&quot;Content-Type&quot;: &quot;application/json&quot;}
        if token:
            self.headers[&quot;Authorization&quot;] = f&quot;Bearer {token}&quot;

    def upload_image(self, image_path):
        &quot;&quot;&quot;Upload image to ComfyUI server&quot;&quot;&quot;
        try:
            with open(image_path, 'rb') as f:
                files = {'image': f}
                response = requests.post(f&quot;{self.base_url}/upload/image&quot;, files=files)
                if response.status_code == 200:
                    result = response.json()
                    return result.get('name', os.path.basename(image_path))
                else:
                    raise Exception(f&quot;Failed to upload image: {response.text}&quot;)
        except Exception as e:
            print(f&quot;Image upload error: {e}&quot;)
            return None

    def upload_video(self, video_path):
        &quot;&quot;&quot;Upload video to ComfyUI server&quot;&quot;&quot;
        try:
            with open(video_path, 'rb') as f:
                files = {'video': f}
                response = requests.post(f&quot;{self.base_url}/upload/video&quot;, files=files)
                if response.status_code == 200:
                    result = response.json()
                    return result.get('name', os.path.basename(video_path))
                else:
                    raise Exception(f&quot;Failed to upload video: {response.text}&quot;)
        except Exception as e:
            print(f&quot;Video upload error: {e}&quot;)
            return None

    def generate_fun_control_video(self, positive_prompt, negative_prompt=None,
                                  ref_image_path=None, ref_image_name=None,
                                  control_video_path=None, control_video_name=None,
                                  width=640, height=640, length=81, fps=16,
                                  steps=4, cfg=1, seed=None,
                                  canny_low_threshold=0.1, canny_high_threshold=0.6,
                                  shift=8.0, lora_strength=1.0):
        &quot;&quot;&quot;Generate Fun Control video using Wan2.2 based on original JSON workflow&quot;&quot;&quot;
        print(&quot;Starting Wan2.2 Fun Control video generation...&quot;)

        # Use default negative prompt if not provided
        if negative_prompt is None:
            negative_prompt = DEFAULT_NEGATIVE_PROMPT

        # Generate random seed if not provided
        if seed is None:
            seed = random.randint(1, 1000000000000000)

        # Handle reference image
        if ref_image_path and not ref_image_name:
            ref_image_name = self.upload_image(ref_image_path)
            if not ref_image_name:
                raise Exception(&quot;Failed to upload reference image&quot;)
        elif not ref_image_name:
            ref_image_name = DEFAULT_REF_IMAGE

        # Handle control video
        if control_video_path and not control_video_name:
            control_video_name = self.upload_video(control_video_path)
            if not control_video_name:
                raise Exception(&quot;Failed to upload control video&quot;)
        elif not control_video_name:
            control_video_name = DEFAULT_CONTROL_VIDEO

        # Workflow based on your provided JSON
        workflow = {
            &quot;162&quot;: {
                &quot;inputs&quot;: {
                    &quot;text&quot;: negative_prompt,
                    &quot;clip&quot;: [&quot;167&quot;, 0]
                },
                &quot;class_type&quot;: &quot;CLIPTextEncode&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;CLIP Text Encode (Negative Prompt)&quot;}
            },
            &quot;163&quot;: {
                &quot;inputs&quot;: {
                    &quot;fps&quot;: fps,
                    &quot;images&quot;: [&quot;164&quot;, 0]
                },
                &quot;class_type&quot;: &quot;CreateVideo&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Create Video&quot;}
            },
            &quot;164&quot;: {
                &quot;inputs&quot;: {
                    &quot;samples&quot;: [&quot;175&quot;, 0],
                    &quot;vae&quot;: [&quot;168&quot;, 0]
                },
                &quot;class_type&quot;: &quot;VAEDecode&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;VAE Decode&quot;}
            },
            &quot;165&quot;: {
                &quot;inputs&quot;: {
                    &quot;unet_name&quot;: HIGH_NOISE_UNET,
                    &quot;weight_dtype&quot;: &quot;default&quot;
                },
                &quot;class_type&quot;: &quot;UNETLoader&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;UNet Loader (High Noise)&quot;}
            },
            &quot;166&quot;: {
                &quot;inputs&quot;: {
                    &quot;unet_name&quot;: LOW_NOISE_UNET,
                    &quot;weight_dtype&quot;: &quot;default&quot;
                },
                &quot;class_type&quot;: &quot;UNETLoader&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;UNet Loader (Low Noise)&quot;}
            },
            &quot;167&quot;: {
                &quot;inputs&quot;: {
                    &quot;clip_name&quot;: CLIP_MODEL,
                    &quot;type&quot;: &quot;wan&quot;,
                    &quot;device&quot;: &quot;default&quot;
                },
                &quot;class_type&quot;: &quot;CLIPLoader&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;CLIP Loader&quot;}
            },
            &quot;168&quot;: {
                &quot;inputs&quot;: {
                    &quot;vae_name&quot;: VAE_MODEL
                },
                &quot;class_type&quot;: &quot;VAELoader&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;VAE Loader&quot;}
            },
            &quot;169&quot;: {
                &quot;inputs&quot;: {
                    &quot;add_noise&quot;: &quot;enable&quot;,
                    &quot;noise_seed&quot;: seed,
                    &quot;steps&quot;: steps,
                    &quot;cfg&quot;: cfg,
                    &quot;sampler_name&quot;: &quot;euler&quot;,
                    &quot;scheduler&quot;: &quot;simple&quot;,
                    &quot;start_at_step&quot;: 0,
                    &quot;end_at_step&quot;: 2,
                    &quot;return_with_leftover_noise&quot;: &quot;enable&quot;,
                    &quot;model&quot;: [&quot;176&quot;, 0],
                    &quot;positive&quot;: [&quot;180&quot;, 0],
                    &quot;negative&quot;: [&quot;180&quot;, 1],
                    &quot;latent_image&quot;: [&quot;180&quot;, 2]
                },
                &quot;class_type&quot;: &quot;KSamplerAdvanced&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;K Sampler Advanced (High Noise)&quot;}
            },
            &quot;170&quot;: {
                &quot;inputs&quot;: {
                    &quot;filename_prefix&quot;: &quot;wan22_fun_control/video&quot;,
                    &quot;format&quot;: &quot;auto&quot;,
                    &quot;codec&quot;: &quot;auto&quot;,
                    &quot;video&quot;: [&quot;163&quot;, 0]
                },
                &quot;class_type&quot;: &quot;SaveVideo&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Save Video&quot;}
            },
            &quot;171&quot;: {
                &quot;inputs&quot;: {
                    &quot;video&quot;: [&quot;174&quot;, 0]
                },
                &quot;class_type&quot;: &quot;GetVideoComponents&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Get Video Components&quot;}
            },
            &quot;172&quot;: {
                &quot;inputs&quot;: {
                    &quot;images&quot;: [&quot;173&quot;, 0]
                },
                &quot;class_type&quot;: &quot;PreviewImage&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Preview Image&quot;}
            },
            &quot;173&quot;: {
                &quot;inputs&quot;: {
                    &quot;low_threshold&quot;: canny_low_threshold,
                    &quot;high_threshold&quot;: canny_high_threshold,
                    &quot;image&quot;: [&quot;171&quot;, 0]
                },
                &quot;class_type&quot;: &quot;Canny&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Canny Edge Detection&quot;}
            },
            &quot;174&quot;: {
                &quot;inputs&quot;: {
                    &quot;file&quot;: control_video_name,
                    &quot;video-preview&quot;: &quot;&quot;
                },
                &quot;class_type&quot;: &quot;LoadVideo&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Load Video&quot;}
            },
            &quot;175&quot;: {
                &quot;inputs&quot;: {
                    &quot;add_noise&quot;: &quot;disable&quot;,
                    &quot;noise_seed&quot;: 0,
                    &quot;steps&quot;: steps,
                    &quot;cfg&quot;: cfg,
                    &quot;sampler_name&quot;: &quot;euler&quot;,
                    &quot;scheduler&quot;: &quot;simple&quot;,
                    &quot;start_at_step&quot;: 2,
                    &quot;end_at_step&quot;: 4,
                    &quot;return_with_leftover_noise&quot;: &quot;disable&quot;,
                    &quot;model&quot;: [&quot;177&quot;, 0],
                    &quot;positive&quot;: [&quot;180&quot;, 0],
                    &quot;negative&quot;: [&quot;180&quot;, 1],
                    &quot;latent_image&quot;: [&quot;169&quot;, 0]
                },
                &quot;class_type&quot;: &quot;KSamplerAdvanced&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;K Sampler Advanced (Low Noise)&quot;}
            },
            &quot;176&quot;: {
                &quot;inputs&quot;: {
                    &quot;shift&quot;: shift,
                    &quot;model&quot;: [&quot;181&quot;, 0]
                },
                &quot;class_type&quot;: &quot;ModelSamplingSD3&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Model Sampling SD3 (High Noise)&quot;}
            },
            &quot;177&quot;: {
                &quot;inputs&quot;: {
                    &quot;shift&quot;: shift,
                    &quot;model&quot;: [&quot;182&quot;, 0]
                },
                &quot;class_type&quot;: &quot;ModelSamplingSD3&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Model Sampling SD3 (Low Noise)&quot;}
            },
            &quot;178&quot;: {
                &quot;inputs&quot;: {
                    &quot;image&quot;: ref_image_name
                },
                &quot;class_type&quot;: &quot;LoadImage&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Load Reference Image&quot;}
            },
            &quot;179&quot;: {
                &quot;inputs&quot;: {
                    &quot;text&quot;: positive_prompt,
                    &quot;clip&quot;: [&quot;167&quot;, 0]
                },
                &quot;class_type&quot;: &quot;CLIPTextEncode&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;CLIP Text Encode (Positive Prompt)&quot;}
            },
            &quot;180&quot;: {
                &quot;inputs&quot;: {
                    &quot;width&quot;: width,
                    &quot;height&quot;: height,
                    &quot;length&quot;: length,
                    &quot;batch_size&quot;: 1,
                    &quot;positive&quot;: [&quot;179&quot;, 0],
                    &quot;negative&quot;: [&quot;162&quot;, 0],
                    &quot;vae&quot;: [&quot;168&quot;, 0],
                    &quot;ref_image&quot;: [&quot;178&quot;, 0],
                    &quot;control_video&quot;: [&quot;173&quot;, 0]
                },
                &quot;class_type&quot;: &quot;Wan22FunControlToVideo&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;Wan22 Fun Control To Video&quot;}
            },
            &quot;181&quot;: {
                &quot;inputs&quot;: {
                    &quot;lora_name&quot;: HIGH_NOISE_LORA,
                    &quot;strength_model&quot;: lora_strength,
                    &quot;model&quot;: [&quot;165&quot;, 0]
                },
                &quot;class_type&quot;: &quot;LoraLoaderModelOnly&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;LoRA Loader (High Noise)&quot;}
            },
            &quot;182&quot;: {
                &quot;inputs&quot;: {
                    &quot;lora_name&quot;: LOW_NOISE_LORA,
                    &quot;strength_model&quot;: lora_strength,
                    &quot;model&quot;: [&quot;166&quot;, 0]
                },
                &quot;class_type&quot;: &quot;LoraLoaderModelOnly&quot;,
                &quot;_meta&quot;: {&quot;title&quot;: &quot;LoRA Loader (Low Noise)&quot;}
            }
        }

        print(&quot;Submitting Wan2.2 Fun Control video generation workflow...&quot;)
        print(f&quot;Positive Prompt: {positive_prompt}&quot;)
        print(f&quot;Reference Image: {ref_image_name}&quot;)
        print(f&quot;Control Video: {control_video_name}&quot;)
        print(f&quot;Video Dimensions: {width}x{height}&quot;)
        print(f&quot;Video Length: {length} frames&quot;)
        print(f&quot;FPS: {fps}&quot;)
        print(f&quot;Random Seed: {seed}&quot;)

        response = requests.post(
            f&quot;{self.base_url}/prompt&quot;, 
            headers=self.headers, 
            json={&quot;prompt&quot;: workflow, &quot;client_id&quot;: self.client_id}
        )

        print(f&quot;API Response: {response.text}&quot;)

        if response.status_code != 200:
            raise Exception(f&quot;API request failed with status code: {response.status_code}&quot;)

        result = response.json()
        if &quot;error&quot; in result:
            raise Exception(f&quot;Workflow error: {result['error']}&quot;)
        if &quot;prompt_id&quot; not in result:
            raise Exception(f&quot;No prompt_id in response: {result}&quot;)

        return result[&quot;prompt_id&quot;], seed

    def get_status(self, task_id):
        &quot;&quot;&quot;Get task status&quot;&quot;&quot;
        try:
            # Check queue status
            queue_data = requests.get(f&quot;{self.base_url}/queue&quot;, headers=self.headers).json()

            # Check if in running queue
            if any(item[1] == task_id for item in queue_data.get(&quot;queue_running&quot;, [])):
                return &quot;processing&quot;

            # Check if in pending queue
            if any(item[1] == task_id for item in queue_data.get(&quot;queue_pending&quot;, [])):
                return &quot;pending&quot;

            # Check history
            history_response = requests.get(f&quot;{self.base_url}/history/{task_id}&quot;, headers=self.headers)
            if history_response.status_code == 200:
                history = history_response.json()
                if task_id in history:
                    return &quot;completed&quot;

            return &quot;processing&quot;
        except Exception as e:
            print(f&quot;Status check error: {e}&quot;)
            return &quot;processing&quot;

    def download_video(self, task_id, output_dir=&quot;outputs&quot;):
        &quot;&quot;&quot;Download generated video and preview files&quot;&quot;&quot;
        try:
            # Ensure output directory exists
            os.makedirs(output_dir, exist_ok=True)

            response = requests.get(f&quot;{self.base_url}/history/{task_id}&quot;, headers=self.headers)
            history = response.json()

            if task_id in history:
                outputs = history[task_id]['outputs']
                downloaded_files = []

                for node_id, output in outputs.items():
                    # Check for video files
                    if 'videos' in output:
                        for video_info in output['videos']:
                            filename = video_info['filename']
                            # Download video
                            video_response = requests.get(
                                f&quot;{self.base_url}/view?filename={filename}&quot;, 
                                headers=self.headers
                            )

                            if video_response.status_code == 200:
                                output_path = os.path.join(output_dir, filename)
                                with open(output_path, &quot;wb&quot;) as f:
                                    f.write(video_response.content)
                                downloaded_files.append(output_path)
                                print(f&quot;Video saved: {output_path}&quot;)

                    # Check for preview images
                    if 'images' in output:
                        for img_info in output['images']:
                            filename = img_info['filename']
                            # Download preview image
                            img_response = requests.get(
                                f&quot;{self.base_url}/view?filename={filename}&quot;, 
                                headers=self.headers
                            )

                            if img_response.status_code == 200:
                                output_path = os.path.join(output_dir, filename)
                                with open(output_path, &quot;wb&quot;) as f:
                                    f.write(img_response.content)
                                downloaded_files.append(output_path)
                                print(f&quot;Preview image saved: {output_path}&quot;)

                return downloaded_files

        except Exception as e:
            print(f&quot;Download error: {e}&quot;)

        return []

    def generate_batch(self, prompt_configs, **kwargs):
        &quot;&quot;&quot;Batch generate videos with different configurations&quot;&quot;&quot;
        results = []

        for i, config in enumerate(prompt_configs):
            print(f&quot;\nStarting Fun Control video generation task {i+1}/{len(prompt_configs)}...&quot;)

            try:
                task_id, seed = self.generate_fun_control_video(**config, **kwargs)

                # Wait for completion
                while True:
                    status = self.get_status(task_id)
                    print(f&quot;Task {i+1} status: {status}&quot;)

                    if status == &quot;completed&quot;:
                        files = self.download_video(task_id)
                        results.append({
                            'task_id': task_id,
                            'seed': seed,
                            'files': files,
                            'config': config
                        })
                        break
                    elif status == &quot;failed&quot;:
                        print(f&quot;Task {i+1} failed&quot;)
                        break

                    time.sleep(15)  # Video generation takes longer

            except Exception as e:
                print(f&quot;Task {i+1} error: {e}&quot;)

        return results

def main():
    &quot;&quot;&quot;Main function - Execute Wan2.2 Fun Control video generation&quot;&quot;&quot;
    client = ComfyUIWan22FunControlClient()

    try:
        print(&quot;Wan2.2 Fun Control video generation client started...&quot;)

        # Single video generation example
        print(&quot;\n=== Single Fun Control Video Generation ===&quot;)

        # You can provide local file paths or use existing file names
        ref_image_path = None  # Set to your image path, e.g., &quot;reference.jpg&quot;
        control_video_path = None  # Set to your video path, e.g., &quot;control.mp4&quot;

        task_id, seed = client.generate_fun_control_video(
            positive_prompt=DEFAULT_POSITIVE_PROMPT,
            negative_prompt=DEFAULT_NEGATIVE_PROMPT,
            ref_image_path=ref_image_path,
            ref_image_name=DEFAULT_REF_IMAGE,
            control_video_path=control_video_path,
            control_video_name=DEFAULT_CONTROL_VIDEO,
            width=640,
            height=640,
            length=81,
            fps=16,
            steps=4,
            cfg=1
        )

        print(f&quot;Task ID: {task_id}&quot;)
        print(f&quot;Seed: {seed}&quot;)

        # Wait for task completion (video generation takes longer)
        while True:
            status = client.get_status(task_id)
            print(f&quot;Current status: {status}&quot;)

            if status == &quot;completed&quot;:
                print(&quot;Fun Control video generation completed!&quot;)
                break
            elif status == &quot;failed&quot;:
                print(&quot;Generation failed!&quot;)
                return

            time.sleep(15)

        # Download video and preview files
        downloaded_files = client.download_video(task_id)
        if downloaded_files:
            print(f&quot;Successfully downloaded {len(downloaded_files)} files!&quot;)
            for file in downloaded_files:
                print(f&quot;File path: {file}&quot;)
        else:
            print(&quot;Download failed&quot;)

        # Batch generation example
        print(&quot;\n=== Batch Generation Example ===&quot;)
        batch_configs = [
            {
                'positive_prompt': &quot;A dancer performing ballet in a beautiful garden with flowers&quot;,
                'ref_image_name': DEFAULT_REF_IMAGE,
                'control_video_name': DEFAULT_CONTROL_VIDEO,
                'width': 640,
                'height': 640,
                'length': 49
            },
            {
                'positive_prompt': &quot;A person walking through a bustling city street at sunset&quot;,
                'ref_image_name': DEFAULT_REF_IMAGE,
                'control_video_name': DEFAULT_CONTROL_VIDEO,
                'width': 640,
                'height': 640,
                'length': 65
            }
        ]

        # Uncomment to run batch generation
        # batch_results = client.generate_batch(batch_configs, fps=16, steps=4)
        # print(f&quot;Batch generation completed, generated {len(batch_results)} videos&quot;)

    except Exception as e:
        print(f&quot;Error: {e}&quot;)

if __name__ == &quot;__main__&quot;:
    main()


</code></pre>


</details>

<h2 id="_6">ğŸ¯ æ§åˆ¶ç±»å‹è¯¦è§£</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #2563eb;">âœï¸</div>
<h4 style="margin: 0 0 8px 0; color: #1e40af;">Cannyï¼ˆçº¿ç¨¿ï¼‰</h4>
<p style="margin: 0; color: #1e40af;">è¾¹ç¼˜æ£€æµ‹æ§åˆ¶ï¼Œé€‚ç”¨äºè½®å»“å’Œçº¿æ¡æ§åˆ¶</p>
</div>

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #059669;">ğŸ”ï¸</div>
<h4 style="margin: 0 0 8px 0; color: #059669;">Depthï¼ˆæ·±åº¦ï¼‰</h4>
<p style="margin: 0; color: #065f46;">æ·±åº¦ä¿¡æ¯æ§åˆ¶ï¼Œä¿æŒåœºæ™¯çš„ç©ºé—´ç»“æ„</p>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #ea580c;">ğŸ¤¸</div>
<h4 style="margin: 0 0 8px 0; color: #ea580c;">OpenPoseï¼ˆäººä½“å§¿åŠ¿ï¼‰</h4>
<p style="margin: 0; color: #9a3412;">äººä½“éª¨éª¼ç‚¹æ§åˆ¶ï¼Œç²¾ç¡®æ§åˆ¶äººç‰©åŠ¨ä½œ</p>
</div>

<div style="background: #f5f3ff; border-left: 4px solid #7c3aed; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #7c3aed;">ğŸ“</div>
<h4 style="margin: 0 0 8px 0; color: #7c3aed;">MLSDï¼ˆå‡ ä½•è¾¹ç¼˜ï¼‰</h4>
<p style="margin: 0; color: #5b21b6;">å‡ ä½•çº¿æ¡æ£€æµ‹ï¼Œé€‚ç”¨äºå»ºç­‘å’Œç»“æ„æ§åˆ¶</p>
</div>

</div>

<h2 id="_7">ğŸ’¡ è¡¥å……è¯´æ˜ä¸æ‰©å±•</h2>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

### ğŸ”§ é¢„å¤„ç†å™¨æ‰©å±•

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; margin: 16px 0; border-radius: 4px;">
  <strong>ğŸ“¦ ComfyUI-comfyui_controlnet_aux</strong><br>
  ç”±äº ComfyUI è‡ªå¸¦çš„èŠ‚ç‚¹ä¸­ï¼Œé¢„å¤„ç†å™¨èŠ‚ç‚¹åªæœ‰ Canny çš„é¢„å¤„ç†å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/Fannovel16/comfyui_controlnet_aux" target="_blank" style="color: #2563eb;">ComfyUI-comfyui_controlnet_aux</a> æ¥å®ç°å…¶ä»–ç±»å‹çš„å›¾åƒé¢„å¤„ç†ã€‚
</div>

### ğŸ¨ æ”¯æŒçš„é¢„å¤„ç†ç±»å‹

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin: 16px 0;">
  <div style="background: #eff6ff; padding: 12px; border-radius: 6px; text-align: center;">
    <span style="background: #2563eb; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">Canny Edge</span>
  </div>
  <div style="background: #f0fdf4; padding: 12px; border-radius: 6px; text-align: center;">
    <span style="background: #059669; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">Depth Map</span>
  </div>
  <div style="background: #fff7ed; padding: 12px; border-radius: 6px; text-align: center;">
    <span style="background: #ea580c; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">OpenPose</span>
  </div>
  <div style="background: #f3e8ff; padding: 12px; border-radius: 6px; text-align: center;">
    <span style="background: #7c3aed; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">MLSD Lines</span>
  </div>
  <div style="background: #fef3c7; padding: 12px; border-radius: 6px; text-align: center;">
    <span style="background: #d97706; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">Normal Map</span>
  </div>
  <div style="background: #fef2f2; padding: 12px; border-radius: 6px; text-align: center;">
    <span style="background: #dc2626; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">Segmentation</span>
  </div>
</div>

</div>

<h2 id="_8">ğŸ¯ åº”ç”¨åœºæ™¯</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #2563eb;">ğŸ¬</div>
<h4 style="margin: 0 0 8px 0; color: #1e40af;">åŠ¨ç”»åˆ¶ä½œ</h4>
<p style="margin: 0; color: #1e40af;">ç²¾ç¡®æ§åˆ¶è§’è‰²åŠ¨ä½œå’Œåœºæ™¯å˜åŒ–</p>
</div>

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #059669;">ğŸ¨</div>
<h4 style="margin: 0 0 8px 0; color: #059669;">è‰ºæœ¯åˆ›ä½œ</h4>
<p style="margin: 0; color: #065f46;">å°†é™æ€è‰ºæœ¯ä½œå“è½¬æ¢ä¸ºåŠ¨æ€è¡¨ç°</p>
</div>

<div style="background: #fff7ed; border-left: 4px solid #ea580c; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #ea580c;">ğŸƒ</div>
<h4 style="margin: 0 0 8px 0; color: #ea580c;">è¿åŠ¨åˆ†æ</h4>
<p style="margin: 0; color: #9a3412;">ä½“è‚²åŠ¨ä½œåˆ†æå’Œè®­ç»ƒè§†é¢‘åˆ¶ä½œ</p>
</div>

<div style="background: #f5f3ff; border-left: 4px solid #7c3aed; padding: 16px; border-radius: 4px; text-align: center;">
<div style="font-size: 2.5em; margin-bottom: 12px; color: #7c3aed;">ğŸ—ï¸</div>
<h4 style="margin: 0 0 8px 0; color: #7c3aed;">å»ºç­‘å¯è§†åŒ–</h4>
<p style="margin: 0; color: #5b21b6;">å»ºç­‘è®¾è®¡çš„åŠ¨æ€å±•ç¤ºå’Œæ¼«æ¸¸</p>
</div>

</div>

<h2 id="_9">ğŸ’¡ ä½¿ç”¨æŠ€å·§ä¸å»ºè®®</h2>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0;">

<div style="background: #dcfce7; border-left: 4px solid #059669; padding: 16px; border-radius: 4px;">
<h4 style="color: #059669; margin: 0 0 8px 0;">âœ… æœ€ä½³å®è·µ</h4>
<ul style="margin: 0; padding-left: 20px; color: #065f46;">
  <li>é€‰æ‹©åˆé€‚çš„æ§åˆ¶ç±»å‹åŒ¹é…å†…å®¹éœ€æ±‚</li>
  <li>ç¡®ä¿æ§åˆ¶è§†é¢‘è´¨é‡æ¸…æ™°ç¨³å®š</li>
  <li>æ ¹æ®æ˜¾å­˜æƒ…å†µé€‰æ‹©åˆé€‚çš„åˆ†è¾¨ç‡</li>
  <li>æç¤ºè¯è¦ä¸æ§åˆ¶å†…å®¹ä¿æŒä¸€è‡´</li>
</ul>
</div>

<div style="background: #fef2f2; border-left: 4px solid #dc2626; padding: 16px; border-radius: 4px;">
<h4 style="color: #dc2626; margin: 0 0 8px 0;">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul style="margin: 0; padding-left: 20px; color: #991b1b;">
  <li>ç¡®ä¿ High/Low Noise æ¨¡å‹ä¸ LoRA åŒ¹é…</li>
  <li>é¢„å¤„ç†è§†é¢‘æ—¶æ³¨æ„ç¦ç”¨å¯¹åº”èŠ‚ç‚¹</li>
  <li>æ§åˆ¶è§†é¢‘å¸§ç‡è¦ä¸ç›®æ ‡è§†é¢‘åŒ¹é…</li>
  <li>å¤æ‚æ§åˆ¶å¯èƒ½éœ€è¦æ›´å¤šè®¡ç®—èµ„æº</li>
</ul>
</div>

</div>

<h2 id="_10">ğŸ”§ æŠ€æœ¯è§„æ ¼</h2>
<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 16px 0;">

### ğŸ’» ç³»ç»Ÿè¦æ±‚

<div style="overflow-x: auto; margin: 16px 0;">
<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 6px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <thead style="background: #f8fafc;">
    <tr>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">é…ç½®é¡¹</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">æœ€ä½è¦æ±‚</th>
      <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; color: #1e40af; font-weight: 600;">æ¨èé…ç½®</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">GPU æ˜¾å­˜</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">20GB</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">24GB+</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">ç³»ç»Ÿå†…å­˜</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">32GB</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">64GB+</td>
    </tr>
    <tr>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9; font-weight: 500;">å­˜å‚¨ç©ºé—´</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">50GB</td>
      <td style="padding: 12px; border-bottom: 1px solid #f1f5f9;">100GB+ SSD</td>
    </tr>
    <tr>
      <td style="padding: 12px; font-weight: 500;">æ¨è GPU</td>
      <td style="padding: 12px;">RTX 4090</td>
      <td style="padding: 12px;">RTX 4090 / A100</td>
    </tr>
  </tbody>
</table>
</div>

### ğŸ¬ æ”¯æŒçš„æ§åˆ¶ç²¾åº¦

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin: 16px 0;">

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h3 style="margin-top: 0; color: #1e40af;">ğŸ¯ ç²¾ç¡®æ§åˆ¶</h3>
<ul style="margin: 0; padding-left: 20px;">
  <li><strong>OpenPose</strong>: å…³èŠ‚ç‚¹çº§åˆ«ç²¾åº¦</li>
  <li><strong>Depth</strong>: åƒç´ çº§æ·±åº¦æ§åˆ¶</li>
  <li><strong>Canny</strong>: è¾¹ç¼˜è½®å»“æ§åˆ¶</li>
</ul>
</div>

<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px;">
<h3 style="margin-top: 0; color: #1e40af;">âš¡ æ€§èƒ½ä¼˜åŒ–</h3>
<ul style="margin: 0; padding-left: 20px;">
  <li><strong>Lightning LoRA</strong>: 4å€é€Ÿåº¦æå‡</li>
  <li><strong>FP8 é‡åŒ–</strong>: æ˜¾å­˜ä¼˜åŒ–</li>
  <li><strong>æ‰¹å¤„ç†</strong>: å¤šè§†é¢‘å¹¶è¡Œ</li>
</ul>
</div>

</div>

</div>

<hr />
<div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 6px; margin-top: 24px;">
  <p style="margin: 0; color: #64748b; font-size: 14px;">
    ğŸ® <strong>Wan2.2-Fun-Control è§†é¢‘æ§åˆ¶ç”Ÿæˆ</strong> | å¤šæ¨¡æ€æ§åˆ¶æ¡ä»¶çš„ç²¾å‡†è§†é¢‘åˆ›ä½œ
  </p>
  <p style="margin: 4px 0 0 0; color: #94a3b8; font-size: 12px;">
    Â© 2025 Alibaba PAI å›¢é˜Ÿ | Apache 2.0 å¼€æºåè®® | è®©æ¯ä¸€å¸§éƒ½åœ¨ç²¾ç¡®æ§åˆ¶ä¹‹ä¸‹
  </p>
</div>
        
      </div>

      <div class="copyrights">Â© 2009-2022 Aliyun.com ç‰ˆæƒæ‰€æœ‰</div>
    </div>
  </div>
  
  <!--
  MkDocs version      : 1.6.1
  Docs Build Date UTC : 2025-11-25 12:05:08.438691+00:00
  -->
</body>
</html>